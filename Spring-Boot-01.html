<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 4.2.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>Spring Boot 教程详细版（上篇） - 何年の再遇见</title>


    <meta name="description" content="内容概要：  Spring-Boot-入门 Spring-Boot-配置 Spring-Boot-日志">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Boot 教程详细版（上篇）">
<meta property="og:url" content="https://guoshizhan.github.io/Spring-Boot-01.html">
<meta property="og:site_name" content="何年の再遇见">
<meta property="og:description" content="内容概要：  Spring-Boot-入门 Spring-Boot-配置 Spring-Boot-日志">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://guoshizhan.github.io/gallery/Java-Study/Spring-Boot-01/000.png">
<meta property="article:published_time" content="2020-01-23T01:00:47.000Z">
<meta property="article:modified_time" content="2020-06-17T15:41:38.566Z">
<meta property="article:author" content="Java Developer">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Spring Boot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://guoshizhan.github.io/gallery/Java-Study/Spring-Boot-01/000.png">







<link rel="icon" href="/images/favicon.ico">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-2-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/GSZ's-Blog.png" alt="Spring Boot 教程详细版（上篇）" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">首页</a>
                
                <a class="navbar-item"
                href="/archives">归档</a>
                
                <a class="navbar-item"
                href="/categories">分类</a>
                
                <a class="navbar-item"
                href="/tags">标签</a>
                
                <a class="navbar-item"
                href="/friends">友链</a>
                
                <a class="navbar-item"
                href="/albums">相册</a>
                
                <a class="navbar-item"
                href="/media">影音</a>
                
                <a class="navbar-item"
                href="/inspiration">随笔</a>
                
                <a class="navbar-item"
                href="/secret">私密</a>
                
                <a class="navbar-item"
                href="/about">关于</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" rel="noopener" title="MyGitHub" href="https://github.com/guoshizhan">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-9-desktop is-9-widescreen has-order-2 column-main">
<div class="card">
    
    <div class="card-image">
        <span  class="image is-7by1">
            <img class="thumbnail" src="/../gallery/Java-Study/Spring-Boot-01/000.png" alt="Spring Boot 教程详细版（上篇）">
        </span>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                
                <time class="level-item has-text-grey" datetime="2020-01-23T01:00:47.000Z">2020-01-23</time>
                
                    <span class="display-none-class"></span>
                    <img class="not-gallery-item" src="/images/chat.svg">&nbsp;<a href="/Spring-Boot-01.html#comment-container"><span></span></a>&nbsp;&nbsp;&nbsp;&nbsp;</img>
                
                
                <div class="level-item">
                <i class="fas fa-folder-open has-text-grey"></i>&nbsp;
                <a class="has-link-grey -link" href="/categories/Java%E5%AD%A6%E4%B9%A0/">Java学习</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 小时 读完 (大约 14090 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                Spring Boot 教程详细版（上篇）
            
        </h1>
        <div class="content">
            <hr>
<p><font color=blue>内容概要：</font></p>
<ul>
<li><a href="#Spring-Boot-入门">Spring-Boot-入门</a></li>
<li><a href="#Spring-Boot-配置">Spring-Boot-配置</a></li>
<li><a href="#Spring-Boot-日志">Spring-Boot-日志</a></li>
</ul>
<a id="more"></a>

<h1 id="Spring-Boot-入门"><a href="#Spring-Boot-入门" class="headerlink" title="Spring Boot 入门"></a>Spring Boot 入门</h1><h2 id="Spring-Boot-出现的背景"><a href="#Spring-Boot-出现的背景" class="headerlink" title="Spring Boot 出现的背景"></a>Spring Boot 出现的背景</h2><p><strong><em>J2EE 笨重的开发、繁多的配置、低下的开发效率、复杂的部署流程、第三方技术集成难度大</em></strong> ，从而诞生了 <code>Spring Boot</code> 。举个栗子，如果不用 Spring Boot ，平时我们开发一个 Web 应用程序需要以下步骤：</p>
<div class="hacker">
    <div class="block-title ">
        <i class="fa fa-bullseye" aria-hidden="true"></i>
        <span>传统 Web 应用开发步骤：</span>
    </div>
    <div class="block">
        1、新建一个 web 工程
        2、引入依赖
        3、配置 web.xml 文件
        4、配置框架本身的配置文件
        5、加入运行容器
        6、调试运行
    </div>
</div>


<p>在这些步骤中，<strong><em>可能感触最深的或者最麻烦的就是引入各种依赖和配置各种 xml 文件</em></strong> ，一不小心，依赖包可能冲突，或者缺少，配置文件也可能写错。<strong><em>有的时候，我们可能只是开发的一个很小的 web 应用，但是搭建环境可能比写业务代码花的时间长</em></strong> ，想起来头都大。。。或者得不偿失。这时，<code>Spring Boot</code> 就诞生了！</p>
<h2 id="Spring-Boot简介"><a href="#Spring-Boot简介" class="headerlink" title="Spring Boot简介"></a>Spring Boot简介</h2><blockquote>
<p><code>相关链接：</code></p>
<p><strong><em>Spring 官网：</em></strong> <a href="https://spring.io">Spring 官网</a><br><strong><em>Spring Boot 官网：</em></strong> <a href="https://spring.io/projects/spring-boot">Spring Boot 官网</a><br><strong><em>使用文档：</em></strong> <a href="https://docs.spring.io/spring-boot/docs/2.2.6.RELEASE/reference/html/using-spring-boot.html#using-boot">Spring boot 使用文档</a></p>
</blockquote>
<p><code>Spring Boot</code> 是由 <strong><em>Pivotal 团队</em></strong> 提供的全新框架，其 <code>设计目的</code> <strong><em>是用来简化 Spring 应用的初始搭建以及开发过程</em></strong> 。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。</p>
<p><code>Spring Boot</code> 简化了基于 Spring 的应用开发，<code>约定大于配置，去繁从简</code> ，通过少量的代码就能创建一个独立的、产品级别的 Spring 应用。不仅如此，<strong><em>Spring Boot 为 Spring 平台及第三方库提供 <code>开箱即用</code> 的设置</em></strong> ，这样你就可以有条不紊地开始。<strong><em>Spring Boot 的核心思想就是约定大于配置，多数 Spring Boot 应用只需要很少的 Spring 配置</em></strong> 。采用 Spring Boot 可以大大的简化你的开发模式，所有你想集成的常用框架，它都有对应的组件支持。</p>
<h2 id="Spring-Boot-优缺点"><a href="#Spring-Boot-优缺点" class="headerlink" title="Spring Boot 优缺点"></a>Spring Boot 优缺点</h2><div class="green">
    <div class="block-title ">
        <i class="fa fa-bullseye" aria-hidden="true"></i>
        <span>Spring Boot 优点：</span>
    </div>
    <div class="block">
        1、快速创建独立运行的 Spring 项目以及与主流框架集成
        2、使用嵌入式的 Servlet 容器，应用无需打成 WAR 包
        3、starters 自动依赖与版本控制
        4、大量的自动配置，简化开发，也可修改默认值
        5、无需配置 XML，无代码生成，开箱即用
        6、准生产环境的运行时应用监控
        7、与云计算的天然集成
    </div>
</div>

<div class="red">
    <div class="block-title ">
        <i class="fa fa-bullseye" aria-hidden="true"></i>
        <span>Spring Boot 缺点：</span>
    </div>
    <div class="block">
        Spring Boot 唯一的缺点就是入门容易，精通难，只有对 Spring 非常的了解，才能够深度定制 Spring Boot。
    </div>
</div>

<div class="hacker">
    <div class="block-title ">
        <i class="fa fa-bullseye" aria-hidden="true"></i>
        <span>Spring Boot 就是：</span>
    </div>
    <div class="block">
        1、简化 Spring 应用开发的一个框架。
        2、整个 Spring 技术栈的一个大整合。
        3、J2EE 开发的一站式解决方案。
    </div>
</div>

<h2 id="微服务简介"><a href="#微服务简介" class="headerlink" title="微服务简介"></a>微服务简介</h2><p><code>微服务</code> <strong><em>是一种架构风格，它能够将单一程序开发成一组小型服务的组合，每一个功能元素最终都是一个可独立替换和独立升级的软件单元</em></strong> 。<strong><em>这些小型服务可以使用不同的编程语言以及数据存储技术</em></strong> ，每一个微服务运行在自己的进程中，使用轻量级机制通信，并通过完全自动化部署机制来独立部署。</p>
<img src="../gallery/Java-Study/Spring-Boot-01/018.jpg"/>

<div class="hacker">
    <div class="block-title ">
        <i class="fa fa-bullseye" aria-hidden="true"></i>
        <span>微服务：</span>
    </div>
    <div class="block">
        1、始于2014年，<a href="https://martinfowler.com/articles/microservices.html#MicroservicesAndSoa">martin fowler 的初始微服务文档</a>
        2、微服务其实就是一种架构风格（服务微化）
        3、一个应用应该是一组小型服务
        4、可以通过 HTTP 的方式进行互通
        5、原先的应用称为单体应用：ALL IN ONE
    </div>
</div>

<p><strong><em>单体应用</em></strong> 与 <strong><em>微服务</em></strong> 之间的对比图：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/006.png"/>

<p><strong><em>微服务之间的相互调用</em></strong> 关系图：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/007.png"/>

<h1 id="Spring-Boot-配置"><a href="#Spring-Boot-配置" class="headerlink" title="Spring Boot 配置"></a>Spring Boot 配置</h1><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><div class="red">
    <div class="block-title ">
        <i class="fa fa-bullseye" aria-hidden="true"></i>
        <span>学习 Spring Boot 前提：</span>
    </div>
    <div class="block">
        1、最好学习过 Spring 框架
        2、能够使用 Maven 进行项目构建和依赖管理
        3、熟悉使用 IDE，如 IDEA 、 Eclipse 或者 STS 等等
    </div>
</div>


<div class="green">
    <div class="block-title ">
        <i class="fa fa-bullseye" aria-hidden="true"></i>
        <span>环境准备：</span>
    </div>
    <div class="block">
        1、JDK1.8：Spring Boot 官网推荐 jdk1.7 及以上，个人推荐使用 JDK1.8 或 JDK11
        2、Maven3.x：maven 3.3 以上版本
        3、IntelliJ IDEA：2017年及以上，可使用 2020 版本，支持中文哦
        4、Spring Boot 1.5.9.RELEASE：Spring Boot 官网推荐 1.5.9 及以上，个人推荐 Spring Boot 2.x 以上
    </div>
</div>


<h3 id="Maven-配置"><a href="#Maven-配置" class="headerlink" title="Maven 配置"></a>Maven 配置</h3><p>找到 <strong><em>Maven 安装目录下</em></strong> <code>settings.xml</code> 配置文件的 <code>profiles</code> 标签，然后在 <code>profiles</code> 里面添加下面代码：</p>
<figure class="highlight xml"><figcaption><span>D:\01_Programs\02_Java\06_Maven\apache-maven-3.5.2\conf\settings.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 如果你的 JDK 是 1.8 的，那就直接复制，是其他的，改一下就行了 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk-1.8<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="IDEA-配置"><a href="#IDEA-配置" class="headerlink" title="IDEA 配置"></a>IDEA 配置</h3><p>按照 <code>File\settings\build,Execution,Deployment\Build Tools\Maven</code> 路径 <strong><em>给 IDEA 配置好 Maven</em></strong> ，配置项及截图如下：</p>
<figure class="highlight yaml"><figcaption><span>File\settings\build,Execution,Deployment\Build Tools\Maven</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置好 Maven 的下列三项：</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="string">Maven</span> <span class="string">home</span> <span class="string">directory</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">User</span> <span class="string">settings</span> <span class="string">file</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">Local</span> <span class="string">repository</span></span><br></pre></td></tr></table></figure>

<img src="../gallery/Java-Study/Spring-Boot-01/016.png"/>

<h2 id="创建一个简单的-Web-应用"><a href="#创建一个简单的-Web-应用" class="headerlink" title="创建一个简单的 Web 应用"></a>创建一个简单的 Web 应用</h2><p>现在就使用 Spring Boot 开发一个小功能：浏览器发送一个 <code>hello 请求</code> ，服务器接受请求并处理，然后返回相应的结果。那就开始吧！</p>
<h3 id="创建-Maven-项目"><a href="#创建-Maven-项目" class="headerlink" title="创建 Maven 项目"></a>创建 Maven 项目</h3><p><strong><em>新建一个 project 或者 module</em></strong> ，选择 <code>Maven</code> ，然后填写相关信息，<strong><em>一直下一步即可</em></strong> ，直到 <code>Finish</code> 就完成了 Maven 项目的创建。我创建的项目工程名是 <code>001-springboot-helloworld</code>，完成后如下图：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/017.png"/>
<img src="../gallery/Java-Study/Spring-Boot-01/004.png"/>

<h3 id="导入相关的依赖"><a href="#导入相关的依赖" class="headerlink" title="导入相关的依赖"></a>导入相关的依赖</h3><p>打开 Maven 工程下的 <code>pom.xml</code> 文件，把以下代码复制到 <code>pom.xml</code> 文件中：</p>
<figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="创建主程序"><a href="#创建主程序" class="headerlink" title="创建主程序"></a>创建主程序</h3><p>在 Maven 项目的 <code>src\main\java</code> 下面创建 <code>主程序 HelloWorldApplication</code> ，<strong><em>【下方有注意事项】</em></strong> ，注意事项及代码如下：</p>
<div class="hacker">
    <div class="block-title ">
        <i class="fa fa-bullseye" aria-hidden="true"></i>
        <span>注意事项：</span>
    </div>
    <div class="block">
        1、我的包名为 edu.jgsu ，路径是：src\main\java\edu\jgsu
        2、HelloWorldApplication 必须放在 jgsu 包里面
        3、以后所有包和类必须放在 jgsu 包下面的子包里面，即 jgsu 下面的子包 和 HelloWorldApplication 同级
        4、文字描述不够直观，请看下图
    </div>
</div>

<img src="../gallery/Java-Study/Spring-Boot-01/018.png"/>

<figure class="highlight java"><figcaption><span>001-springboot-helloworld\src\main\java\edu\jgsu\HelloWorldApplication</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.jgsu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">// @SpringBootApplication 用来标注一个主程序类，说明这是一个 Spring Boot 应用</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 将 Spring 应用启动起来</span></span><br><span class="line">        SpringApplication.run(HelloWorldApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写-Controller"><a href="#编写-Controller" class="headerlink" title="编写 Controller"></a>编写 Controller</h3><p>在 <code>edu\jgsu</code> 下面新建一个 <code>Controller 包</code> ，然后在 Controller 下编写 <code>HelloController 类</code> 。代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.jgsu.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span>    <span class="comment">// 返回字符串，不写这个注解，那么spring boot 就会去 resources 下找以 Hello,Spring Boot! 命名的静态页面</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)    <span class="comment">// 访问路径</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">Hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello,Spring Boot!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="启动运行"><a href="#启动运行" class="headerlink" title="启动运行"></a>启动运行</h3><p>切换到 <code>HelloWorldApplication 类</code> ，<strong><em>运行其主方法</em></strong> ，然后在浏览器输入如下地址即可。如果看到以下效果，代表 <strong><em>启动成功</em></strong> ：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/001.png"/>

<p>然后在地址栏后面加上 <code>/hello</code> ，<code>/hello</code> 来自于 <strong><em>HelloController 类 @RequestMapping 注解</em></strong> 里面的字符串。成功如下图：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/002.png"/>

<h3 id="打包部署"><a href="#打包部署" class="headerlink" title="打包部署"></a>打包部署</h3><p><strong><em>添加打包插件</em></strong> ，把以下代码添加到 <code>pom.xml</code> 文件 <code>&lt;/project&gt;</code> 上一行中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 这个插件，可以将应用打包成一个可执行的 jar 包 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>选择 <code>Maven</code> ，然后点击 <code>Lifecycle\package</code> 命令即可进行打包。如下图：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/005.png"/>

<p>打包完成之后，<strong><em>停止 Maven 项目运行，去 Maven 工程目录下找到 <code>target</code> 文件夹，刚刚打包的 jar 包就放在里面</em></strong> 。然后复制到桌面，使用 <code>java -jar xxx.jar</code> 命令来使用 jar 包。这个 jar 包 <code>内嵌 tomcat</code> ，启动成功后仍然可以通过浏览器访问，如下图：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/003.png"/>
<img src="../gallery/Java-Study/Spring-Boot-01/001.png"/>
<img src="../gallery/Java-Study/Spring-Boot-01/002.png"/>

<h3 id="拓展：自定义-banner"><a href="#拓展：自定义-banner" class="headerlink" title="拓展：自定义 banner"></a>拓展：自定义 banner</h3><p>我们启动 spring 项目时，默认的 <code>banner</code> 是这样的，如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="string">.</span>   <span class="string">____</span>          <span class="string">_</span>            <span class="string">__</span> <span class="string">_</span> <span class="string">_</span></span><br><span class="line"> <span class="string">/\\</span> <span class="string">/</span> <span class="string">___'_</span> <span class="string">__</span> <span class="string">_</span> <span class="string">_(_)_</span> <span class="string">__</span>  <span class="string">__</span> <span class="string">_</span> <span class="string">\</span> <span class="string">\</span> <span class="string">\</span> <span class="string">\</span></span><br><span class="line"><span class="string">(</span> <span class="string">(</span> <span class="string">)\___</span> <span class="string">|</span> <span class="string">'_ | '</span><span class="string">_|</span> <span class="string">|</span> <span class="string">'_ \/ _` | \ \ \ \</span></span><br><span class="line"><span class="string"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span></span><br><span class="line"><span class="string">  '</span>  <span class="string">|____|</span> <span class="string">.__|_|</span> <span class="string">|_|_|</span> <span class="string">|_\__,</span> <span class="string">|</span> <span class="string">/</span> <span class="string">/</span> <span class="string">/</span> <span class="string">/</span></span><br><span class="line"> <span class="string">=========|_|==============|___/=/_/_/_/</span></span><br></pre></td></tr></table></figure>

<p>如果我想把 <code>banner</code> 换成其他的文字可以吗？当然可以，以下是步骤：</p>
<div class="hacker">
    <div class="block-title ">
        <i class="fa fa-bullseye" aria-hidden="true"></i>
        <span>替换步骤：</span>
    </div>
    <div class="block">
        1、搜索引擎搜索：spring boot banner 。个人推荐网站：<a href="https://www.bootschool.net/ascii">https://www.bootschool.net/ascii</a>
        2、输入自己喜欢的文字，然后生成，最后拷贝结果。或者点击 ASCll 艺术字，然后寻找到自己喜欢的 banner 并拷贝结果。
        3、回到 IDEA ，在 src/main/resources/ 下新建 banner.txt 文本，把拷贝结果复制到里面即可。
        4、重新启动项目，即可看到结果，示例如下：
    </div>
</div>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我的 banner</span></span><br><span class="line"></span><br><span class="line"><span class="string">////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="string">//</span>                          <span class="string">_ooOoo_</span>                               <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                         <span class="string">o8888888o</span>                              <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                         <span class="number">88</span><span class="string">" . "</span><span class="number">88</span>                              <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                         <span class="string">(|</span> <span class="string">^_^</span> <span class="string">|)</span>                              <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                         <span class="string">O\</span>  <span class="string">=</span>  <span class="string">/O</span>                              <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                      <span class="string">____/`---'\____</span>                           <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                    <span class="string">.'</span>  <span class="string">\\|</span>     <span class="string">|//</span>  <span class="string">`.</span>                         <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                   <span class="string">/</span>  <span class="string">\\|||</span>  <span class="string">:</span>  <span class="string">|||//</span>  <span class="string">\</span>                        <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                  <span class="string">/</span>  <span class="string">_|||||</span> <span class="string">-:-</span> <span class="string">|||||-</span>  <span class="string">\</span>                       <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                  <span class="string">|</span>   <span class="string">|</span> <span class="string">\\\</span>  <span class="bullet">-</span>  <span class="string">///</span> <span class="string">|</span>   <span class="string">|</span>                       <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                  <span class="string">|</span> <span class="string">\_|</span>  <span class="string">''</span><span class="string">\---/''</span>  <span class="string">|</span>   <span class="string">|</span>                       <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                  <span class="string">\</span>  <span class="string">.-\__</span>  <span class="string">`-`</span>  <span class="string">___/-.</span> <span class="string">/</span>                       <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                <span class="string">___`.</span> <span class="string">.'</span>  <span class="string">/--.--\</span>  <span class="string">`.</span> <span class="string">.</span> <span class="string">___</span>                     <span class="string">//</span></span><br><span class="line"><span class="string">//</span>              <span class="string">.""</span> <span class="string">'&lt;  `.___\_&lt;|&gt;_/___.'</span>  <span class="string">&gt;'"".</span>                  <span class="string">//</span></span><br><span class="line"><span class="string">//</span>            <span class="string">|</span> <span class="string">|</span> <span class="string">:</span>  <span class="string">`-</span> <span class="string">\`.;`\</span> <span class="string">_</span> <span class="string">/`;.`/</span> <span class="bullet">-</span> <span class="string">`</span> <span class="string">:</span> <span class="string">|</span> <span class="string">|</span>                 <span class="string">//</span></span><br><span class="line"><span class="string">//</span>            <span class="string">\</span>  <span class="string">\</span> <span class="string">`-.</span>   <span class="string">\_</span> <span class="string">__\</span> <span class="string">/__</span> <span class="string">_/</span>   <span class="string">.-`</span> <span class="string">/</span>  <span class="string">/</span>                 <span class="string">//</span></span><br><span class="line"><span class="string">//</span>      <span class="string">========`-.____`-.___\_____/___.-`____.-'========</span>         <span class="string">//</span></span><br><span class="line"><span class="string">//</span>                           <span class="string">`=---='</span>                              <span class="string">//</span></span><br><span class="line"><span class="string">//</span>      <span class="string">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>        <span class="string">//</span></span><br><span class="line"><span class="string">//</span>            <span class="string">佛祖保佑</span>       <span class="string">永不宕机</span>     <span class="string">永无BUG</span>                    <span class="string">//</span></span><br><span class="line"><span class="string">////////////////////////////////////////////////////////////////////</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>TIPS：</code> 到这里为止，一个通过 <code>Maven 构建的 Spring Boot 应用</code> 就完成了。接下来将对这个应用进行剖析。</p>
</blockquote>
<h2 id="hello-world-应用剖析"><a href="#hello-world-应用剖析" class="headerlink" title="hello world 应用剖析"></a>hello world 应用剖析</h2><p>为什么 Spring Boot 能够如此简单的实现一个 Web 应用？为什么 Spring Boot 不需要配置繁琐的 tomcat 服务器？<strong>*这就要归功于 <code>Spring Boot 的各种启动器</code> *</strong> 。先阅读以下依赖并分析：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- web 相关依赖：包括 tomcat、dispatcherServlet和 xml 配置文件等等 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>spring-boot-starter</code> 称之为 <code>场景启动器</code> ，<strong><em>它能够帮我们导入了各种模块正常运行所依赖的组件</em></strong> 。Spring Boot 将所有的功能场景都抽取出来，做成一个个的 <code>starters（启动器）</code> ，<strong><em>只需要在项目里面引入这些 starter ，那么相关场景的所有依赖都会导入进来</em></strong> 。要用什么功能就导入什么场景的启动器即可。例如要用到 <code>邮件</code> ，那就导入 <code>spring-boot-starter-mail</code> 启动器。具体用哪一个版本可参考官网的某一个详细版本。如 <a href="https://docs.spring.io/spring-boot/docs/2.1.12.RELEASE/reference/html/using-boot-build-systems.html">版本2.12</a> 。接下来，我们再来看看下面的依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../../spring-boot-dependencies<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>spring-boot-starter-parent</code> 是 <strong><em>spring-boot-starter-web</em></strong> 的父项目。而 <code>spring-boot-dependencies</code> 是 <strong><em>spring-boot-starter-parent</em></strong> 的父项目，它才是是真正管理 Spring Boot 应用里面的所有的依赖版本的管理者，也可以称之为 <code>Spring Boot 的版本仲裁中心</code> 。以后我们导入依赖，默认是不需要写版本的。【除非没有在 dependencies 里面管理的依赖，才需要声明版本号】</p>
<h2 id="自动配置原理"><a href="#自动配置原理" class="headerlink" title="自动配置原理"></a>自动配置原理</h2><p>让我们先来看看 <strong><em>Spring Boot 的主程序类</em></strong> <code>HelloWorldApplication</code> ，也就是 Spring Boot 应用的入口，代码如下：</p>
<figure class="highlight java"><figcaption><span>001-springboot-helloworld\src\main\java\edu\jgsu\HelloWorldApplication</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.jgsu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">// @SpringBootApplication 用来标注一个主程序类，说明这是一个 Spring Boot 应用</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 将 Spring 应用启动起来</span></span><br><span class="line">        SpringApplication.run(HelloWorldApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@SpringBootApplication</code> 注解是用来说明这个类是 Spring Boot 的主配置类 ，<strong><em>Spring Boot 就应该运行这个类的 main 方法来启动 Spring Boot 应用</em></strong> 。让我们跟进 <code>@SpringBootApplication</code> 看一下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(</span><br><span class="line">    excludeFilters = &#123;<span class="meta">@Filter</span>(</span><br><span class="line">    type = FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;TypeExcludeFilter<span class="class">.<span class="keyword">class</span>&#125;</span></span><br><span class="line"><span class="class">), @<span class="title">Filter</span>(</span></span><br><span class="line"><span class="class">    <span class="title">type</span> </span>= FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;AutoConfigurationExcludeFilter<span class="class">.<span class="keyword">class</span>&#125;</span></span><br><span class="line"><span class="class">)&#125;</span></span><br><span class="line"><span class="class">)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">SpringBootApplication</span> </span>&#123;</span><br><span class="line">    <span class="meta">@AliasFor</span>(</span><br><span class="line">        annotation = EnableAutoConfiguration<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class">    )</span></span><br><span class="line"><span class="class">...</span></span><br></pre></td></tr></table></figure>

<p><code>@SpringBootConfiguration</code> <strong><em>是 Spring Boot 的配置类注解，用于标注在某个类上，表示这是一个 Spring Boot 的配置类</em></strong> 。跟进这个注解，我们又发现了 <code>@Configuration</code> 注解，这个注解用于配置类，是 Spring 底层注解。<strong><em>Spring Boot 中的配置类和 Spring 中的配置文件是等价的</em></strong> 。接着往下看，<code>@Component</code> 注解表示配置类也是容器中的一个组件。</p>
<p>以前我们需要手动配置的东西，现在 Spring Boot 帮我们自动配置。<code>@EnableAutoConfiguration</code> 这个注解的作用就是 <strong><em>告诉 Spring Boot 开启自动配置功能</em></strong> ，这样自动配置才能生效。跟进这个注解：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;AutoConfigurationImportSelector<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">EnableAutoConfiguration</span> </span>&#123;</span><br><span class="line">    String ENABLED_OVERRIDE_PROPERTY = <span class="string">"spring.boot.enableautoconfiguration"</span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>在上面代码中，有两个注解很重要，<code>@AutoConfigurationPackage</code> 和 <code>@Import</code> 。<code>@AutoConfigurationPackage 注解</code> ：<strong><em>自动配置包，将主配置类【@SpringBootApplication 标注的类】的所在包及下面所有子包里面的所有组件扫描到 Spring 容器</em></strong> 。如果把上面的 <strong><em>Controller 包下面的 HelloController 类</em></strong> 剪切到 <code>edu</code> 包下，此时，这个类不在扫描的范围之内，那么 HelloController 类将无法被访问，那么当我们访问 <code>/Hello</code> 时，报错 <code>404</code> 。下面，我们跟进这个注解看一下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Target(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;Registrar<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">AutoConfigurationPackage</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Spring 的底层注解 <code>@Import</code> ，<strong><em>给容器中导入一个组件，导入的组件为 Registrar.class</em></strong> 。进一步的源码也就不分析了，到这里就差不多了【其实是博主水平有限，只能到这了，哈哈】。</p>
<p>那么到这里为止，我们清楚了 <code>自动配置注解的功能</code> <strong><em>就是给容器中导入非常多的自动配置类【xxxAutoConfiguration】，就是给容器中导入某个场景需要的所有组件，并配置好这些组件</em></strong> 。有了自动配置类，也就免去了我们手动编写配置注入功能组件等相关工作。</p>
<p>Spring Boot 在启动的时候从 <strong><em>类路径下</em></strong> 的 <code>META-INF/spring.factories</code> 中获取 <strong><em>EnableAutoConfiguration 注解所指定的值</em></strong> ，将这些值作为自动配置类导入到容器中，自动配置类就生效，帮我们进行自动配置工作。以前我们需要自己配置的东西，现在自动配置类都帮我们配置好。J2EE 的整体整合解决方案和自动配置都在 <code>spring-boot-autoconfigure-2.0.1.RELEASE.jar</code> 。</p>
<h2 id="快速创建-Spring-Boot-应用"><a href="#快速创建-Spring-Boot-应用" class="headerlink" title="快速创建 Spring Boot 应用"></a>快速创建 Spring Boot 应用</h2><p>使用 <code>Spring Initializr</code> 快速创建 Spring Boot 应用。<strong><em>首先</em></strong> ，我们新建一个模块或者工程，选择左边的 <code>Spring Initializr</code> ，然后点击下一步，如下图：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/008.png"/>

<p><strong><em>然后填好相关信息，点击下一步</em></strong> ，此刻进入到 <code>依赖选择页面</code> ，选择好你要依赖，例如你要做 Web 开发，那么你就选择左侧的 Web ，中间选择你要的依赖，我选的是 <code>Spring Web</code> 。如果你还要用到数据库，那就选择数据库相关的即可。下图仅供参考：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/009.png"/>

<p>选择好以后，点击完成即可。这里要 <code>注意一点</code> ：选择我们需要的模块之后，向导会联网创建 Spring Boot 项目 <code>【一定要联网】</code> 。创建完成之后项目结构如下图。<strong><em>然后自己编写 Controller 类，再去浏览器访问</em></strong> ，这里就不在赘述了。</p>
<img src="../gallery/Java-Study/Spring-Boot-01/010.png"/>

<p>项目创建成功后，默认生成的内容有哪些呢？如下：</p>
<div class="hacker">
    <div class="block-title ">
        <i class="fa fa-bullseye" aria-hidden="true"></i>
        <span>默认生成的内容：</span>
    </div>
    <div class="block">
        1、主程序 Application 已经生成好了，我们只需要编写业务逻辑即可
        2、resources 文件夹中目录结构
        &nbsp;&nbsp;&nbsp;&nbsp;1、static：保存所有的静态资源：如 js、css、images 等等
        &nbsp;&nbsp;&nbsp;&nbsp;2、templates：保存所有的模板页面
        &nbsp;&nbsp;&nbsp;&nbsp;3、application.properties：Spring Boot 应用的配置文件，可以修改一些默认设置
        3、Spring Boot 默认 jar 包使用嵌入式的 Tomcat，默认不支持 JSP 页面，所以要使用模板引擎（freemarker、thymeleaf）
    </div>
</div>

<h2 id="Spring-Boot-的配置文件"><a href="#Spring-Boot-的配置文件" class="headerlink" title="Spring Boot 的配置文件"></a>Spring Boot 的配置文件</h2><p>Spring Boot 使用一个全局的配置文件，<strong><em>配置文件名是固定的</em></strong> ，就叫做 <code>application</code> ，但是 <strong><em>后缀却有两种写法</em></strong> ：<code>properties</code> 和 <code>yaml</code> 。 例如：<code>application.properties</code> 、 <code>application.yml</code> 或者 <code>application.yaml</code> 。其实有很多配置 pring Boot 在底层都给我们自动配置好了，而配置文件的作用 <strong><em>就是修改 Spring Boot 自动配置的默认值</em></strong> 。</p>
<h3 id="YAML-配置文件"><a href="#YAML-配置文件" class="headerlink" title="YAML 配置文件"></a>YAML 配置文件</h3><p><code>.yml</code> 或 <code>.yaml</code> 是 <strong><em>YAML（YAML Ain’t Markup Language）</em></strong> 语言的文件，<strong><em>以数据为中心，比 json、xml 等更适合做配置文件</em></strong> 。知识拓展：YAML 的语法规范：<a href="http://www.yaml.org/">http://www.yaml.org/</a> 。</p>
<div class="hacker">
    <div class="block-title ">
        <i class="fa fa-bullseye" aria-hidden="true"></i>
        <span>YAML Ain't Markup Language 的解释：</span>
    </div>
    <div class="block">
        1、YAML A Markup Language：是一个标记语言
        2、YAML isn't Markup Language：不是一个标记语言
    </div>
</div>

<h3 id="标记语言对比"><a href="#标记语言对比" class="headerlink" title="标记语言对比"></a>标记语言对比</h3><ul>
<li>以前的配置文件大多都使用的是 <code>xxxx.xml</code> 文件，而 xml 大量的数据浪费在了标签的开闭上。</li>
<li><code>YAML</code> 文件以数据为中心，比 json、xml 等更适合做配置文件</li>
<li>具体对比如下</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># properties 配置文件</span></span><br><span class="line"><span class="string">server.port=8080</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># YAML 配置文件</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># xml 配置文件</span></span><br><span class="line"><span class="string">&lt;server&gt;</span></span><br><span class="line">  <span class="string">&lt;port&gt;8080&lt;/port&gt;</span></span><br><span class="line"><span class="string">&lt;/server&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="YAML-基本语法"><a href="#YAML-基本语法" class="headerlink" title="YAML 基本语法"></a>YAML 基本语法</h3><p><strong><em>YAML 基本语法格式</em></strong> ：<code>key:(空格)value</code> 。例如：<code>port: 8080</code> 。表示一对键值对（空格必须有）。以 <strong><em>空格的缩进</em></strong> 来控制层级关系，只要是 <strong><em>左对齐</em></strong> 的一列数据，都是同一个层级的。<strong><em>属性和值也是大小写敏感</em></strong> ，如下代码：四个属性同一层级，且 <strong><em>PORT 和 port 、 PATH 和 path</em></strong> 是不同属性。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line">  <span class="attr">PORT:</span> <span class="number">8082</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">/hello</span></span><br><span class="line">  <span class="attr">PORT:</span> <span class="string">/world</span></span><br></pre></td></tr></table></figure>
<h3 id="YAML-值的写法"><a href="#YAML-值的写法" class="headerlink" title="YAML 值的写法"></a>YAML 值的写法</h3><p><code>第一种写法：</code> <strong><em>字面量：普通的值（数字，字符串，布尔）。字面量格式</em></strong> ：<code>key: value</code> 。字面直接来写，<strong><em>字符串默认不用加上单引号或者双引号，加上有不同意义</em></strong> 。<code>加上双引号：</code> 不会转义字符串里面的特殊字符，特殊字符会作为本身想表示的意思。例如：<strong><em>name: “zhangsan \n lisi” 输出：zhangsan 换行 lisi</em></strong> 。<code>加上单引号：</code> 会转义特殊字符，特殊字符最终只是一个普通的字符串数据。例如：<strong><em>name:   ‘zhangsan \n lisi’ 输出：zhangsan \n lisi</em></strong> 。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line"><span class="attr">age:</span> <span class="number">23</span></span><br><span class="line"><span class="attr">address:</span> <span class="string">HangZhou</span></span><br></pre></td></tr></table></figure>

<p><code>第二种写法：</code> <strong><em>对象、Map【属性和值】【键值对】</em></strong> 。<code>key: value</code> 在下一行来写对象的属性和值的关系。<strong><em>注意事项: 缩进对象还是 key: value 的方式</em></strong> 。如下 friends 对象：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对象的默认写法</span></span><br><span class="line"><span class="attr">friends:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line">  <span class="attr">hobby:</span> <span class="string">chess</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对象的行内写法</span></span><br><span class="line"><span class="attr">friends:</span> <span class="string">&#123;name:</span> <span class="string">zhangsan,hobby:</span> <span class="string">chess&#125;</span></span><br></pre></td></tr></table></figure>

<p><code>第三种写法：</code> <strong><em>数组（List、Set）</em></strong> 。用 <code>&#39; - &#39;</code> 来表示数组中的一个元素，写法如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数组的默认写法</span></span><br><span class="line"><span class="attr">pets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cat</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">dog</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pig</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数组的行内写法</span></span><br><span class="line"><span class="attr">pets:</span> <span class="string">[cat,dog,pig]</span></span><br></pre></td></tr></table></figure>

<h3 id="配置文件值的注入"><a href="#配置文件值的注入" class="headerlink" title="配置文件值的注入"></a>配置文件值的注入</h3><p><code>yaml 配置文件</code> 如下，那么 <strong><em>如何把配置文件里面的值注入到 Java 代码里呢</em></strong> ？即如何实现配置文件与实体类之间的映射？</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yamlperson 在 java 程序中通过 @ConfigurationProperties 注解与 java 程序绑定到一起</span></span><br><span class="line"></span><br><span class="line"><span class="attr">yamlperson:</span></span><br><span class="line">  <span class="attr">lastName:</span> <span class="string">guo</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">22</span></span><br><span class="line">  <span class="attr">boss:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">2018</span><span class="string">/12/3</span></span><br><span class="line">  <span class="attr">maps:</span> <span class="string">&#123;key1:</span> <span class="string">value1,key2:</span> <span class="string">value2&#125;</span></span><br><span class="line">  <span class="attr">lists:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">key1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">key2</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">key3</span></span><br><span class="line">  <span class="attr">dog:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">milk-bottle</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">7</span></span><br></pre></td></tr></table></figure>

<p>首先编写 <code>YamlPerson 类</code> ，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.jgsu.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.Email;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.annotation.Validated;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Null;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: guoshizhan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Create</span>: 2020/2/2 22:49</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 映射 yaml 配置文件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// @Component 把类添加到容器中，使之成为容器中的组件，才能使用容器提供的 @ConfigurationProperties 功能。</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">// @ConfigurationProperties：告诉 Spring Boot 将本类中的所有属性和配置文件中相关的配置进行绑定。</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"yamlperson"</span>)    <span class="comment">// 绑定到 yaml 配置文件中的 yamlperson 对象 【prefix 的值必须小写，大写会报错】</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YamlPerson</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 可以使用 @Value 注解对属性赋值</span></span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean boss;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; maps;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; lists;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person&#123;"</span> +</span><br><span class="line">                <span class="string">"lastName='"</span> + lastName + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">", boss="</span> + boss +</span><br><span class="line">                <span class="string">", birth="</span> + birth +</span><br><span class="line">                <span class="string">", maps="</span> + maps +</span><br><span class="line">                <span class="string">", lists="</span> + lists +</span><br><span class="line">                <span class="string">", dog="</span> + dog +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLastName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLastName</span><span class="params">(String lastName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.lastName = lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">getBoss</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> boss;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBoss</span><span class="params">(Boolean boss)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.boss = boss;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getBirth</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> birth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirth</span><span class="params">(Date birth)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.birth = birth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getMaps</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> maps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMaps</span><span class="params">(Map&lt;String, Object&gt; maps)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.maps = maps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Object&gt; <span class="title">getLists</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> lists;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLists</span><span class="params">(List&lt;Object&gt; lists)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.lists = lists;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dog <span class="title">getDog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDog</span><span class="params">(Dog dog)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dog = dog;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Dog&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后编写 <code>ApplicationTests 测试类</code> 就可以看到效果了，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.jgsu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.jgsu.bean.YamlPerson;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试类如果少了 public ，那么测试类无法使用</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootTest</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">ApplicationTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    YamlPerson yamlPerson;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(yamlPerson);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试结果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">02</span> <span class="number">23</span>:<span class="number">25</span>:<span class="number">46.436</span>  INFO <span class="number">1472</span> --- [           main] edu.jgsu.ApplicationTests                : Started ApplicationTests in <span class="number">3.729</span> seconds (JVM running <span class="keyword">for</span> <span class="number">5.654</span>)</span><br><span class="line">Person&#123;lastName=<span class="string">'guo'</span>, age=<span class="number">22</span>, boss=<span class="keyword">false</span>, birth=Mon Dec <span class="number">03</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2018</span>, maps=&#123;key1=value1, key2=value2&#125;, lists=[key1, key2, key3], dog=Dog&#123;name=<span class="string">'milk-bottle'</span>, age=<span class="number">7</span>&#125;&#125;</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">02</span> <span class="number">23</span>:<span class="number">25</span>:<span class="number">46.579</span>  INFO <span class="number">1472</span> --- [       Thread-<span class="number">2</span>] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@<span class="number">18</span>d604b: startup date [Sun Feb <span class="number">02</span> <span class="number">23</span>:<span class="number">25</span>:<span class="number">43</span> CST <span class="number">2020</span>]; root of context hierarchy</span><br></pre></td></tr></table></figure>

<p>我们还可以 <strong><em>导入配置文件处理器</em></strong> ，以后编写配置就有提示了。在 <code>pom.xml</code> 文件中加入以下代码：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- 导入配置文件处理器，实体类在与配置文件进行绑定，在配置文件中输入值就会有提示 --&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>TIPS：</code> <strong><em>yaml 文件中</em></strong> ，<code>lastName == last-name</code> 。在编写属性时提示 last-name 就不用大惊小怪了。</p>
</blockquote>
<p>现在来看一下上面 yaml 配置文件在 <code>properties 配置文件</code> 中的编写：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">yamlperson.last-name</span>=<span class="string">guo</span></span><br><span class="line"><span class="meta">yamlperson.age</span>=<span class="string">22</span></span><br><span class="line"><span class="meta">yamlperson.boss</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">yamlperson.birth</span>=<span class="string">2018/12/3</span></span><br><span class="line"><span class="meta">yamlperson.maps.key1</span>=<span class="string">value1</span></span><br><span class="line"><span class="meta">yamlperson.maps.key2</span>=<span class="string">value2</span></span><br><span class="line"><span class="meta">yamlperson.maps.key3</span>=<span class="string">value3</span></span><br><span class="line"><span class="meta">yamlperson.lists</span>=<span class="string">key1,key2,key3</span></span><br><span class="line"><span class="meta">yamlperson.dog.name</span>=<span class="string">milk-bottle</span></span><br><span class="line"><span class="meta">yamlperson.dog.age</span>=<span class="string">7</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>注意事项：</code></p>
<p><strong><em>有的时候属性值为中文，那么可能出现乱码</em></strong> 。<code>解决办法：</code> 去 <code>File | Settings | Editor | File Encodings</code> 配置 <code>utf-8</code> ，然后把 <strong><em>转成 ASCll 的那个选项勾上即可</em></strong> 。</p>
</blockquote>
<p>现在，我们来看一下 <strong><em>配置文件和实体类进行映射的第二种姿势</em></strong> ：使用 <code>@Value</code> 注解，部分代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">//@ConfigurationProperties(prefix = "yamlperson")    // prefix 的值必须小写，大写会报错</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YamlPerson</span> </span>&#123;</span><br><span class="line">    <span class="comment">// lastName 必须是邮箱格式</span></span><br><span class="line">    <span class="comment">// @Email 这个注解来自于 JSR303 数据校验【此部分知识自行搜索一下，不是很重要】</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;yamlperson.last-name&#125;"</span>)    <span class="comment">// 使用 SPEL 表达式取出配置文件的值</span></span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"#&#123;11*2&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"true"</span>)</span><br><span class="line">    <span class="keyword">private</span> Boolean boss;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>映射后的结果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">03</span> <span class="number">00</span>:<span class="number">30</span>:<span class="number">41.800</span>  INFO <span class="number">13740</span> --- [           main] edu.jgsu.ApplicationTests                : Started ApplicationTests in <span class="number">3.816</span> seconds (JVM running <span class="keyword">for</span> <span class="number">5.752</span>)</span><br><span class="line">Person&#123;lastName=<span class="string">'guo'</span>, age=<span class="number">22</span>, boss=<span class="keyword">true</span>, birth=<span class="keyword">null</span>, maps=<span class="keyword">null</span>, lists=<span class="keyword">null</span>, dog=<span class="keyword">null</span>&#125;</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">03</span> <span class="number">00</span>:<span class="number">30</span>:<span class="number">42.080</span>  INFO <span class="number">13740</span> --- [       Thread-<span class="number">2</span>] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@<span class="number">3</span>cf2ba: startup date [Mon Feb <span class="number">03</span> <span class="number">00</span>:<span class="number">30</span>:<span class="number">38</span> CST <span class="number">2020</span>]; root of context hierarchy</span><br></pre></td></tr></table></figure>

<p><code>@Value</code> 获取值和 <code>@ConfigurationProperties</code> 获取值比较，如下表：</p>
<table>
<thead>
<tr>
<th>获取值的两种方式</th>
<th>@ConfigurationProperties</th>
<th>@Value</th>
</tr>
</thead>
<tbody><tr>
<td>功能</td>
<td>批量注入配置文件中的属性</td>
<td>一个个指定</td>
</tr>
<tr>
<td>松散绑定（松散语法）</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>SpEL</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>JSR303数据校验</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>复杂类型封装</td>
<td>支持</td>
<td>不支持</td>
</tr>
</tbody></table>
<blockquote>
<p><strong><em>配置文件 yml 还是 properties 它们都能获取到值。那么开发的时候用哪一个好呢？</em></strong></p>
<p>1、如果说，我们只是在某个业务逻辑中需要 <strong><em>获取一下配置文件中的某项值</em></strong> ，使用 <code>@Value</code> 。<br>2、如果说，我们专门编写了一个 JavaBean 来和配置文件进行映射，我们就直接使用 <code>@ConfigurationProperties</code> 。</p>
</blockquote>
<p><code>@PropertySource</code> 、 <code>@ImportResource</code> 和 <code>@Bean</code> 三个注解对比。首先介绍 <code>@PropertySource</code> ，这个注解 <strong><em>用于加载指定的配置文件，即自己定义的配置文件</em></strong> ，如 <code>person.properties</code> ，代码如下：</p>
<figure class="highlight properties"><figcaption><span>custom.properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">yamlperson.last-name</span>=<span class="string">典韦</span></span><br><span class="line"><span class="meta">yamlperson.age</span>=<span class="string">22</span></span><br></pre></td></tr></table></figure>

<p>实体类部分代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PropertySource</span>(value = &#123;<span class="string">"classpath:person.properties"</span>&#125;)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"yamlperson"</span>) <span class="comment">//prefix的值必须小写，大写会报错</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: guoshizhan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Create</span>: 2020/2/2 22:49</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: 映射自定义的 yaml 配置文件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YamlPerson</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>最终返回结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">03</span> <span class="number">10</span>:<span class="number">27</span>:<span class="number">30.260</span>  INFO <span class="number">22524</span> --- [           main] edu.jgsu.ApplicationTests                : Started ApplicationTests in <span class="number">3.158</span> seconds (JVM running <span class="keyword">for</span> <span class="number">4.347</span>)</span><br><span class="line">Person&#123;lastName=<span class="string">'典韦'</span>, age=<span class="number">22</span>, boss=<span class="keyword">null</span>, birth=<span class="keyword">null</span>, maps=<span class="keyword">null</span>, lists=<span class="keyword">null</span>, dog=<span class="keyword">null</span>&#125;</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">03</span> <span class="number">10</span>:<span class="number">27</span>:<span class="number">30.415</span>  INFO <span class="number">22524</span> --- [       Thread-<span class="number">2</span>] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@<span class="number">11001e5</span>: startup date [Mon Feb <span class="number">03</span> <span class="number">10</span>:<span class="number">27</span>:<span class="number">27</span> CST <span class="number">2020</span>]; root of context hierarchy</span><br></pre></td></tr></table></figure>

<p>接着介绍 <code>@ImportResource</code> ，这个注解 <strong><em>用于导入 Spring 的配置文件</em></strong> ，让配置文件里面的内容生效。如下 <code>bean.xml</code> ，代码如下：</p>
<figure class="highlight xml"><figcaption><span>bean.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"helloService"</span> <span class="attr">class</span>=<span class="string">"edu.jgsu.service.HelloService"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后 <strong><em>在测试类添加下列代码</em></strong> ，测试 IOC 容器中是否有 <code>helloService</code> 这个对象，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">ApplicationContext ioc;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(ioc.containsBean(<span class="string">"helloService"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最终返回结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">03</span> <span class="number">11</span>:<span class="number">02</span>:<span class="number">28.466</span>  INFO <span class="number">13836</span> --- [           main] edu.jgsu.ApplicationTests                : Started ApplicationTests in <span class="number">3.041</span> seconds (JVM running <span class="keyword">for</span> <span class="number">4.307</span>)</span><br><span class="line"><span class="keyword">false</span></span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">03</span> <span class="number">11</span>:<span class="number">02</span>:<span class="number">28.611</span>  INFO <span class="number">13836</span> --- [       Thread-<span class="number">2</span>] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@<span class="number">8f</span>f24: startup date [Mon Feb <span class="number">03</span> <span class="number">11</span>:<span class="number">02</span>:<span class="number">25</span> CST <span class="number">2020</span>]; root of context hierarchy</span><br></pre></td></tr></table></figure>

<p>上面的实验说明，<strong><em>Spring Boot 里面没有 Spring 的配置文件，我们自己编写的配置文件 bean.xml也不能被自动识别</em></strong> 。想让 Spring 的配置文件生效，那么就 <strong><em>在 Spring Boot 启动类中</em></strong> 加 <code>@ImportResource</code> 注解，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.jgsu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ImportResource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ImportResource</span>(locations = &#123;<span class="string">"classpath:bean.xml"</span>&#125;)  <span class="comment">// 导入 Spring 配置文件并使其生效</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(Application<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后再去测试类测试，最终结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">03</span> <span class="number">11</span>:<span class="number">08</span>:<span class="number">00.350</span>  INFO <span class="number">9568</span> --- [           main] edu.jgsu.ApplicationTests                : Started ApplicationTests in <span class="number">3.61</span> seconds (JVM running <span class="keyword">for</span> <span class="number">5.002</span>)</span><br><span class="line"><span class="keyword">true</span></span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">03</span> <span class="number">11</span>:<span class="number">08</span>:<span class="number">00.526</span>  INFO <span class="number">9568</span> --- [       Thread-<span class="number">2</span>] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext<span class="meta">@ed</span>52de: startup date [Mon Feb <span class="number">03</span> <span class="number">11</span>:<span class="number">07</span>:<span class="number">57</span> CST <span class="number">2020</span>]; root of context hierarchy</span><br></pre></td></tr></table></figure>

<p>在开发中，不会这样做，自己写配置文件，然后加载进来，这样太麻烦。接下来介绍 Spring Boot 推荐给容器中添加组件的方式：不编写 Spring 的配置文件，使用全注解的方式。首先，我们编写一个配置类：</p>
<figure class="highlight java"><figcaption><span>MyConfig.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.jgsu.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.jgsu.service.HelloService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: guoshizhan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Create</span>: 2020/2/3 11:23</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Configuration</span>：指明当前类是一个配置类；就是来替代之前的Spring配置文件,在 Spring 配置文件中用&lt;bean&gt;&lt;bean/&gt;标签添加组件，</span></span><br><span class="line"><span class="comment"> * 而在配置类中使用使用<span class="doctag">@Bean</span>给容器中添加组件。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将方法的返回值添加到容器中；容器中这个组件默认的id就是方法名</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HelloService <span class="title">helloService02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"配置类给 IOC 容器中添加组件了..."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HelloService();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后回到测试类 test2 方法进行测试，返回结果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2020-02-03 11:31:41.352  INFO 5760 --- [           main] o.s.b.f.xml.XmlBeanDefinitionReader      : Loading XML bean definitions from class path resource [bean.xml]</span><br><span class="line">配置类给 IOC 容器中添加组件了...</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">03</span> <span class="number">11</span>:<span class="number">31</span>:<span class="number">42.229</span>  INFO <span class="number">5760</span> --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [<span class="comment">/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</span></span><br><span class="line"><span class="comment">2020-02-03 11:31:42.466  INFO 5760 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for <span class="doctag">@ControllerAdvice</span>: org.springframework.web.context.support.GenericWebApplicationContext@ed52de: startup date [Mon Feb 03 11:31:40 CST 2020]; root of context hierarchy</span></span><br><span class="line"><span class="comment">2020-02-03 11:31:42.546  INFO 5760 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "&#123;[/hello]&#125;" onto public java.lang.String edu.jgsu.Controller.HelloController.Hello()</span></span><br><span class="line"><span class="comment">2020-02-03 11:31:42.549  INFO 5760 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "&#123;[/error]&#125;" onto public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.error(javax.servlet.http.HttpServletRequest)</span></span><br><span class="line"><span class="comment">2020-02-03 11:31:42.550  INFO 5760 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped "&#123;[/error],produces=[text/html]&#125;" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)</span></span><br><span class="line"><span class="comment">2020-02-03 11:31:42.577  INFO 5760 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</span></span><br><span class="line"><span class="comment">2020-02-03 11:31:42.577  INFO 5760 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</span></span><br><span class="line"><span class="comment">2020-02-03 11:31:43.369  INFO 5760 --- [           main] edu.jgsu.ApplicationTests                : Started ApplicationTests in 2.943 seconds (JVM running for 4.215)</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">2020-02-03 11:31:43.474  INFO 5760 --- [       Thread-2] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@ed52de: startup date [Mon Feb 03 11:31:40 CST 2020]; root of context hierarchy</span></span><br></pre></td></tr></table></figure>
<p>如果把配置类的方法 helloService 方法改为 helloService02 ，那么返回结果就为 false 了。这个我就不贴代码了。</p>
<h3 id="配置文件占位符"><a href="#配置文件占位符" class="headerlink" title="配置文件占位符"></a><font color=blue>配置文件占位符</font></h3><p>先来看配置文件：</p>
<figure class="highlight properties"><figcaption><span>application.properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">yamlperson.last-name</span>=<span class="string">guo$&#123;random.uuid&#125;</span></span><br><span class="line"><span class="meta">yamlperson.age</span>=<span class="string">$&#123;random.int&#125;</span></span><br><span class="line"><span class="meta">yamlperson.boss</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">yamlperson.birth</span>=<span class="string">2018/12/3</span></span><br><span class="line"><span class="meta">yamlperson.maps.key1</span>=<span class="string">value1</span></span><br><span class="line"><span class="meta">yamlperson.maps.key2</span>=<span class="string">value2</span></span><br><span class="line"><span class="meta">yamlperson.maps.key3</span>=<span class="string">value3</span></span><br><span class="line"><span class="meta">yamlperson.lists</span>=<span class="string">key1,key2,key3</span></span><br><span class="line"><span class="meta">yamlperson.dog.name</span>=<span class="string">$&#123;yamlperson.last-name&#125;-milk-bottle</span></span><br><span class="line"><span class="meta">yamlperson.dog.age</span>=<span class="string">7</span></span><br></pre></td></tr></table></figure>
<p>然后去测试类测试，返回结果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">03</span> <span class="number">11</span>:<span class="number">50</span>:<span class="number">18.934</span>  INFO <span class="number">24560</span> --- [           main] edu.jgsu.ApplicationTests                : Started ApplicationTests in <span class="number">2.958</span> seconds (JVM running <span class="keyword">for</span> <span class="number">4.29</span>)</span><br><span class="line">Person&#123;lastName=<span class="string">'guoa1e7ef2b-0e1f-41de-a9fa-16dce9687809'</span>, age=<span class="number">1319770232</span>, boss=<span class="keyword">false</span>, birth=Mon Dec <span class="number">03</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> CST <span class="number">2018</span>, maps=&#123;key1=value1, key2=value2, key3=value3&#125;, lists=[key1, key2, key3], dog=Dog&#123;name=<span class="string">'guoe6b21bd7-bd07-4af5-92eb-915f435eb465-milk-bottle'</span>, age=<span class="number">7</span>&#125;&#125;</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">03</span> <span class="number">11</span>:<span class="number">50</span>:<span class="number">19.074</span>  INFO <span class="number">24560</span> --- [       Thread-<span class="number">2</span>] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext@<span class="number">19</span>df09a: startup date [Mon Feb <span class="number">03</span> <span class="number">11</span>:<span class="number">50</span>:<span class="number">16</span> CST <span class="number">2020</span>]; root of context hierarchy</span><br></pre></td></tr></table></figure>
<p>占位符获取的是原先配置好了的值，如果没有配置，可以是用 “: “ 来指定默认值。例如：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">yamlperson.hello</span>=<span class="string">$&#123;yamlperson.hello:world&#125;-java</span></span><br></pre></td></tr></table></figure>
<p>我的代码了并没有 hello 这个属性，所以它会使用 world 这个被指定的值。所以结果为： <font color=blue>world-java </font> 。那么，如果代码是这样的：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">yamlperson.hello</span>=<span class="string">$&#123;yamlperson.hello&#125;-java</span></span><br></pre></td></tr></table></figure>
<p>这里既没有 hello 属性，也没有指定值，那么返回结果为： <font color=blue> ${yamlperson.hello}-java </font> 。<br>以下是常用随机数代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$&#123;random.value&#125;、$&#123;random.<span class="keyword">int</span>&#125;、$&#123;random.<span class="keyword">long</span>&#125;</span><br><span class="line">$&#123;random.<span class="keyword">int</span>(<span class="number">10</span>)&#125;、$&#123;random.<span class="keyword">int</span>[<span class="number">1024</span>,<span class="number">65536</span>]&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Profile"><a href="#Profile" class="headerlink" title="Profile"></a><font color=blue>Profile</font></h3><p>Profile 是 Spring 对不同环境提供不同配置功能的支持，可以通过激活、指定参数等方式快速切换环境。</p>
<h4 id="多Profile文件"><a href="#多Profile文件" class="headerlink" title="多Profile文件"></a>多Profile文件</h4><p>我们在主配置文件编写的时候，文件名可以是 application-{profile}.properties/yml，实例代码如下：</p>
<ul>
<li>默认的配置文件的端口<figure class="highlight properties"><figcaption><span>application.properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8080</span></span><br></pre></td></tr></table></figure></li>
<li>开发的配置文件端口<figure class="highlight properties"><figcaption><span>application-dev.properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure></li>
<li>测试的配置文件端口<figure class="highlight properties"><figcaption><span>application-test.properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8082</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>上面那么多配置文件，该使用哪一个呢？Spring Boot 默认使用 <font color=blue>application.properties</font> 的配置。</p>
<hr />

<p>激活指定 Profile<br>properties文件激活指定 Profile :</p>
<ul>
<li><p>在 properties 配置文件中激活指定，代码如下：</p>
<figure class="highlight properties"><figcaption><span>application.properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8080</span></span><br><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev</span></span><br></pre></td></tr></table></figure>
<p>激活完成后，那么端口不是 8080 了，而是 dev 的端口 8081 。 </p>
</li>
<li><p>命令行中激活指定：把已经打成 jar 包的文件可以在命令行中再次激活 Profile</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar spring-boot-<span class="number">02</span>-config-<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>-SNAPSHOT.jar --spring.profiles.active=dev</span><br></pre></td></tr></table></figure></li>
<li><p>也可以直接在测试的时候，配置中传入命令行参数，如下图：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/011.png"/>
</li>
<li><p>虚拟机参数激活指定，如下图：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Dspring.profiles.active=dev</span><br></pre></td></tr></table></figure>
<img src="../gallery/Java-Study/Spring-Boot-01/012.png"/>

</li>
</ul>
<hr />

<p>yml 支持多文档块方式激活指定 Profile，比 properties 更简单。格式：使用下面代码中的小短线将 yaml 文件分成几个文档块，如下代码：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">test</span>  <span class="comment">#激活 test 环境</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">test</span>  <span class="comment">#指定属于哪个环境</span></span><br></pre></td></tr></table></figure>
<hr />

<h3 id="配置文件加载位置"><a href="#配置文件加载位置" class="headerlink" title="配置文件加载位置"></a>配置文件加载位置</h3><p>Spring Boot 启动会扫描以下位置的 application.properties 或者 application.yml 文件作为 Spring Boot 的默认配置文件。那么 Spring Boot 是从哪里去找这些配置文件呢？现在告诉你，它从下面四个位置去找：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 项目根目录下的 config 文件夹里的配置文件</span></span><br><span class="line"><span class="string">–</span> <span class="string">file:./config/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 项目根目录下的配置文件</span></span><br><span class="line"><span class="string">–</span> <span class="string">file:./</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类路径下的 config 文件夹下的配置文件，即 resources/config 文件夹下的配置文件</span></span><br><span class="line"><span class="string">–</span> <span class="string">classpath:/config/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类路径下的配置文件，即 resources 文件夹下的配置文件</span></span><br><span class="line"><span class="string">–</span> <span class="string">classpath:/</span></span><br></pre></td></tr></table></figure>

<p>以上是  <strong><em>按照优先级 <code>从高到低</code></em></strong> 的顺序排序，Spring Boot 会从这四个位置加载所有的主配置文件，<strong><em>即上述所有位置的文件都会被加载，高优先级配置内容会覆盖低优先级配置内容</em></strong> ，而且还会 <code>互补配置</code> 。我们还可以通过 <code>spring.config.location</code> 来改变默认的配置文件位置。项目打包好以后，我们可以使用命令行参数的形式，启动项目的时候来指定配置文件的新位置；指定配置文件和默认加载的这些配置文件共同起作用形成互补配置。例如下面代码，加载了 G 盘的配置文件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar spring-boot-<span class="number">02</span>-config-<span class="number">02</span>-<span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT.jar --spring.config.location=G:/application.properties</span><br></pre></td></tr></table></figure>

<h3 id="外部配置加载顺序"><a href="#外部配置加载顺序" class="headerlink" title="外部配置加载顺序"></a><font color=blue>外部配置加载顺序</font></h3><p>SpringBoot也可以从以下位置加载配置:优先级从高到低，高优先级的配置覆盖低优先级的配置，所有的配置会形成互补配置。顺序如下：</p>
<ul>
<li>命令行参数 <font color=blue>【重要】</font><br>所有的配置都可以在命令行上进行指定，多个配置用空格分开，格式： –配置项=值。代码演示如下：<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar spring-boot-config-<span class="number">02</span>-<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>-SNAPSHOT.jar --server.port=<span class="number">8087</span>  --server.context-<span class="built_in">path</span>=/abc</span><br></pre></td></tr></table></figure></li>
<li>来自 java:comp/env 的 JNDI 属性</li>
<li>Java 系统属性（System.getProperties()）</li>
<li>操作系统环境变量</li>
<li>RandomValuePropertySource 配置的 random.* 属性值</li>
</ul>
<blockquote>
<p>配置文件查顺序：由jar包外向jar包内进行寻找。优先加载带profile，然后再来加载不带profile。</p>
</blockquote>
<ul>
<li>jar包外部的application-{profile}.properties或application.yml(带spring.profile)配置文件 <font color=blue>【重要】</font></li>
<li>jar包内部的application-{profile}.properties或application.yml(带spring.profile)配置文件 <font color=blue>【重要】</font></li>
<li>jar包外部的application.properties或application.yml(不带spring.profile)配置文件 <font color=blue>【重要】</font></li>
<li>jar包内部的application.properties或application.yml(不带spring.profile)配置文件 <font color=blue>【重要】</font></li>
<li>@Configuration注解类上的@PropertySource</li>
<li>通过SpringApplication.setDefaultProperties指定的默认属性</li>
</ul>
<blockquote>
<p>所有支持的配置加载来源:<a href="https://docs.spring.io/spring-boot/docs/2.0.1.RELEASE/reference/htmlsingle/#common-application-properties">参考官方文档</a></p>
</blockquote>
<hr />

<h3 id="自动配置原理-1"><a href="#自动配置原理-1" class="headerlink" title="自动配置原理"></a><font color=blue>自动配置原理</font></h3><p>配置文件到底能写什么？怎么写？请参照文档：<a href="https://docs.spring.io/spring-boot/docs/2.0.1.RELEASE/reference/htmlsingle/#common-application-properties">配置文件能配置的属性参照</a><br>Spring Boot 启动的时候加载主配置类，开启了自动配置的功能，这主要归功于 @EnableAutoConfiguration 这个注解，它利用 EnableAutoConfigurationImportSelector 类给容器中导入一些组件，可以查看 selectImports() 方法的内容，获取到的候选配置以 List 集合返回，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SpringFactoriesLoader.loadFactoryNames()</span></span><br><span class="line"><span class="comment">// 扫描所有jar包类路径下  META-INF/spring.factories</span></span><br><span class="line"><span class="comment">// 把扫描到的这些文件的内容包装成properties对象</span></span><br><span class="line"><span class="comment">// 从properties中获取到 EnableAutoConfiguration.class 类（类名）对应的值，然后把他们添加在容器中</span></span><br><span class="line">List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes);  <span class="comment">// 获取候选的配置</span></span><br></pre></td></tr></table></figure>

<p>将类路径下 META-INF/spring.factories 里面配置的所有 EnableAutoConfiguration 的值加入到了容器中:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 所有的自动配置类</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.cloud.CloudAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.ldap.LdapDataAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.elasticsearch.jest.JestAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.mobile.DeviceResolverAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.mobile.DeviceDelegatingViewResolverAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.mobile.SitePreferenceAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.reactor.ReactorAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.security.SecurityAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.security.SecurityFilterAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.security.FallbackWebSecurityAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.security.oauth2.OAuth2AutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.social.SocialWebAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.social.FacebookAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.social.LinkedInAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.social.TwitterAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.web.WebClientAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.websocket.WebSocketMessagingAutoConfiguration,\</span></span><br><span class="line"><span class="string">org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration</span></span><br></pre></td></tr></table></figure>
<p>每一个这样的 xxxAutoConfiguration 类都是容器中的一个组件，都加入到容器中，用他们来做自动配置。那么每一个自动配置类是如何进行自动配置功能呢？以 <strong>HttpEncodingAutoConfiguration（Http编码自动配置）</strong> 为例解释自动配置原理。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 表示这是一个配置类，以前编写的配置文件一样，也可以给容器中添加组件</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动指定类的 ConfigurationProperties 功能；将配置文件中对应的值和 HttpEncodingProperties 绑定起来；并把 HttpEncodingProperties 加入到 ioc 容器中</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>(HttpEncodingProperties<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Spring 底层 @Conditional 注解，根据不同的条件，如果满足指定的条件，整个配置类里面的配置就会生效。判断当前应用是否为 web 应用，如果是，当前配置类生效</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断当前项目有没有这个类 CharacterEncodingFilter ，Spring MVC 中进行乱码解决的过滤器</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(CharacterEncodingFilter<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断配置文件中是否存在某个配置： spring.http.encoding.enabled ，如果不存在，判断也是成立的。即使我们配置文件中不配置pring.http.encoding.enabled=true，也是默认生效的</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(prefix = <span class="string">"spring.http.encoding"</span>, value = <span class="string">"enabled"</span>, matchIfMissing = <span class="keyword">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpEncodingAutoConfiguration</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">      <span class="comment">//他已经和SpringBoot的配置文件映射了</span></span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">final</span> HttpEncodingProperties properties;</span><br><span class="line">  </span><br><span class="line">   <span class="comment">//只有一个有参构造器的情况下，参数的值就会从容器中拿</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="title">HttpEncodingAutoConfiguration</span><span class="params">(HttpEncodingProperties properties)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.properties = properties;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Bean</span>   <span class="comment">//给容器中添加一个组件，这个组件的某些值需要从properties中获取</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span>(CharacterEncodingFilter<span class="class">.<span class="keyword">class</span>) //判断容器没有这个组件？</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">CharacterEncodingFilter</span> <span class="title">characterEncodingFilter</span>() </span>&#123;</span><br><span class="line">        CharacterEncodingFilter filter = <span class="keyword">new</span> OrderedCharacterEncodingFilter();</span><br><span class="line">        filter.setEncoding(<span class="keyword">this</span>.properties.getCharset().name());</span><br><span class="line">        filter.setForceRequestEncoding(<span class="keyword">this</span>.properties.shouldForce(Type.REQUEST));</span><br><span class="line">        filter.setForceResponseEncoding(<span class="keyword">this</span>.properties.shouldForce(Type.RESPONSE));</span><br><span class="line">        <span class="keyword">return</span> filter;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>根据当前不同的条件判断，决定这个配置类是否生效。一但这个配置类生效，这个配置类就会给容器中添加各种组件，这些组件的属性是从对应的 properties 类中获取的，这些类里面的每一个属性又是和配置文件绑定的。所有在配置文件中能配置的属性都是在 xxxxProperties 类中封装者，配置文件能配置什么就可以参照某个功能对应的这个属性类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.http.encoding"</span>)  <span class="comment">//从配置文件中获取指定的值和bean的属性进行绑定</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpEncodingProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_CHARSET = Charset.forName(<span class="string">"UTF-8"</span>);</span><br></pre></td></tr></table></figure>
<hr />

<p><strong><font color=blue>自动配置的精髓</font></strong></p>
<ul>
<li>Spring Boot 启动会加载大量的自动配置类</li>
<li>我们看我们需要的功能有没有 Spring Boot 默认写好的自动配置类</li>
<li>我们再来看这个自动配置类中到底配置了哪些组件【只要我们要用的组件有，我们就不需要再来配置了】</li>
<li>给容器中自动配置类添加组件的时候，会从 properties 类中获取某些属性。我们就可以在配置文件中指定这些属性的值</li>
<li>xxxxAutoConfigurartion：自动配置类，给容器中添加组件</li>
<li>xxxxProperties:封装配置文件中相关属性</li>
</ul>
<p><strong><font color=blue>@Conditional派生注解</font></strong><br>作用：必须是 @Conditional 指定的条件成立，才给容器中添加组件，配置配里面的所有内容才能生效</p>
<table>
<thead>
<tr>
<th>@Conditional扩展注解</th>
<th>作用（判断是否满足当前指定条件）</th>
</tr>
</thead>
<tbody><tr>
<td>@ConditionalOnJava</td>
<td>系统的java版本是否符合要求</td>
</tr>
<tr>
<td>@ConditionalOnBean</td>
<td>容器中存在指定Bean；</td>
</tr>
<tr>
<td>@ConditionalOnMissingBean</td>
<td>容器中不存在指定Bean；</td>
</tr>
<tr>
<td>@ConditionalOnExpression</td>
<td>满足SpEL表达式指定</td>
</tr>
<tr>
<td>@ConditionalOnClass</td>
<td>系统中有指定的类</td>
</tr>
<tr>
<td>@ConditionalOnMissingClass</td>
<td>系统中没有指定的类</td>
</tr>
<tr>
<td>@ConditionalOnSingleCandidate</td>
<td>容器中只有一个指定的Bean，或者这个Bean是首选Bean</td>
</tr>
<tr>
<td>@ConditionalOnProperty</td>
<td>系统中指定的属性是否有指定的值</td>
</tr>
<tr>
<td>@ConditionalOnResource</td>
<td>类路径下是否存在指定资源文件</td>
</tr>
<tr>
<td>@ConditionalOnWebApplication</td>
<td>当前是web环境</td>
</tr>
<tr>
<td>@ConditionalOnNotWebApplication</td>
<td>当前不是web环境</td>
</tr>
<tr>
<td>@ConditionalOnJndi</td>
<td>JNDI存在指定项</td>
</tr>
</tbody></table>
<p>自动配置类必须在一定的条件下才能生效，点进某一个自动配置类，查看这个类生效所需要的条件：如下面的 aop 自动配置类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Source code recreated from a .class file by IntelliJ IDEA</span></span><br><span class="line"><span class="comment">// (powered by Fernflower decompiler)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.springframework.boot.autoconfigure.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.reflect.Advice;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.weaver.AnnotatedElement;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnClass;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.EnableAspectJAutoProxy;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果没有导入 @ConditionalOnClass 注解里面的字节码文件，即相关 jar 包，自动配置类是无法生效的，这就是生效的条件：即各种 Conditional 注解。</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123;EnableAspectJAutoProxy<span class="class">.<span class="keyword">class</span>, <span class="title">Aspect</span>.<span class="title">class</span>, <span class="title">Advice</span>.<span class="title">class</span>, <span class="title">AnnotatedElement</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnProperty</span>(</span></span><br><span class="line"><span class="class">    <span class="title">prefix</span> </span>= <span class="string">"spring.aop"</span>,</span><br><span class="line">    name = &#123;<span class="string">"auto"</span>&#125;,</span><br><span class="line">    havingValue = <span class="string">"true"</span>,</span><br><span class="line">    matchIfMissing = <span class="keyword">true</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AopAutoConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AopAutoConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Configuration</span></span><br><span class="line">    <span class="meta">@EnableAspectJAutoProxy</span>(</span><br><span class="line">        proxyTargetClass = <span class="keyword">true</span></span><br><span class="line">    )</span><br><span class="line">    <span class="meta">@ConditionalOnProperty</span>(</span><br><span class="line">        prefix = <span class="string">"spring.aop"</span>,</span><br><span class="line">        name = &#123;<span class="string">"proxy-target-class"</span>&#125;,</span><br><span class="line">        havingValue = <span class="string">"true"</span>,</span><br><span class="line">        matchIfMissing = <span class="keyword">true</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CglibAutoProxyConfiguration</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">CglibAutoProxyConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Configuration</span></span><br><span class="line">    <span class="meta">@EnableAspectJAutoProxy</span>(</span><br><span class="line">        proxyTargetClass = <span class="keyword">false</span></span><br><span class="line">    )</span><br><span class="line">    <span class="meta">@ConditionalOnProperty</span>(</span><br><span class="line">        prefix = <span class="string">"spring.aop"</span>,</span><br><span class="line">        name = &#123;<span class="string">"proxy-target-class"</span>&#125;,</span><br><span class="line">        havingValue = <span class="string">"false"</span>,</span><br><span class="line">        matchIfMissing = <span class="keyword">false</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">JdkDynamicAutoProxyConfiguration</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">JdkDynamicAutoProxyConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们怎么知道哪些自动配置类生效了，哪些没有生效呢？我们可以通过启用 debug=true 属性，来让控制台打印自动配置报告，这样我们就可以很方便的知道自动配置类是否生效了。</p>
<p>先在配置文件中加入下列代码：</p>
<figure class="highlight properties"><figcaption><span>application.properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">debug</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>
<p>然后运行 Spring Boot 主程序，就可看到控制台的自动配置报告，部分代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">12</span>:<span class="number">05</span>:<span class="number">38.905</span> DEBUG <span class="number">25984</span> --- [           main] ConditionEvaluationReportLoggingListener : </span><br><span class="line"></span><br><span class="line">============================</span><br><span class="line">CONDITIONS EVALUATION REPORT</span><br><span class="line">============================</span><br><span class="line"></span><br><span class="line">Positive matches:</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">   CodecsAutoConfiguration matched:</span><br><span class="line">      - <span class="meta">@ConditionalOnClass</span> found required <span class="class"><span class="keyword">class</span> '<span class="title">org</span>.<span class="title">springframework</span>.<span class="title">http</span>.<span class="title">codec</span>.<span class="title">CodecConfigurer</span>'</span>; <span class="meta">@ConditionalOnMissingClass</span> <span class="function">did not find unwanted <span class="title">class</span> <span class="params">(OnClassCondition)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   CodecsAutoConfiguration.JacksonCodecConfiguration matched:</span></span><br><span class="line"><span class="function">      - @ConditionalOnClass found required class 'com.fasterxml.jackson.databind.ObjectMapper'</span>; <span class="meta">@ConditionalOnMissingClass</span> <span class="function">did not find unwanted <span class="title">class</span> <span class="params">(OnClassCondition)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   CodecsAutoConfiguration.JacksonCodecConfiguration#jacksonCodecCustomizer matched:</span></span><br><span class="line"><span class="function">      - @<span class="title">ConditionalOnBean</span> <span class="params">(types: com.fasterxml.jackson.databind.ObjectMapper; SearchStrategy: all)</span> found bean 'jacksonObjectMapper' <span class="params">(OnBeanCondition)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   DispatcherServletAutoConfiguration matched:</span></span><br><span class="line"><span class="function">      - @ConditionalOnClass found required class 'org.springframework.web.servlet.DispatcherServlet'</span>; <span class="meta">@ConditionalOnMissingClass</span> <span class="function">did not find unwanted <span class="title">class</span> <span class="params">(OnClassCondition)</span></span></span><br><span class="line"><span class="function">      - found <span class="title">ConfigurableWebEnvironment</span> <span class="params">(OnWebApplicationCondition)</span></span></span><br><span class="line"><span class="function">.</span></span><br><span class="line"><span class="function">.</span></span><br><span class="line"><span class="function">.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">Negative matches:</span></span><br><span class="line"><span class="function">-----------------</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   ActiveMQAutoConfiguration:</span></span><br><span class="line"><span class="function">      Did not match:</span></span><br><span class="line"><span class="function">         - @ConditionalOnClass did not find required classes 'javax.jms.ConnectionFactory', 'org.apache.activemq.ActiveMQConnectionFactory' <span class="params">(OnClassCondition)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   AopAutoConfiguration:</span></span><br><span class="line"><span class="function">      Did not match:</span></span><br><span class="line"><span class="function">         - @ConditionalOnClass did not find required classes 'org.aspectj.lang.annotation.Aspect', 'org.aspectj.lang.reflect.Advice', 'org.aspectj.weaver.AnnotatedElement' <span class="params">(OnClassCondition)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   ArtemisAutoConfiguration:</span></span><br><span class="line"><span class="function">      Did not match:</span></span><br><span class="line"><span class="function">         - @ConditionalOnClass did not find required classes 'javax.jms.ConnectionFactory', 'org.apache.activemq.artemis.jms.client.ActiveMQConnectionFactory' <span class="params">(OnClassCondition)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   BatchAutoConfiguration:</span></span><br><span class="line"><span class="function">      Did not match:</span></span><br><span class="line"><span class="function">         - @ConditionalOnClass did not find required classes 'org.springframework.batch.core.launch.JobLauncher', 'org.springframework.jdbc.core.JdbcOperations' <span class="params">(OnClassCondition)</span></span></span><br><span class="line"><span class="function">...</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>到此为止， Spring Boot 的配置学习就结束，记得常回来温习，巩固知识。接下来介绍 Spring Boot 与日志。</p>
</blockquote>
<hr />

<h1 id="Spring-Boot-日志"><a href="#Spring-Boot-日志" class="headerlink" title="Spring Boot 日志"></a>Spring Boot 日志</h1><h2 id="市面上的日志框架"><a href="#市面上的日志框架" class="headerlink" title="市面上的日志框架"></a>市面上的日志框架</h2><p>JUL、JCL、Jboss-logging、logback、log4j、log4j2、slf4j ….</p>
<hr />

<table>
<thead>
<tr>
<th>日志门面  （日志的抽象层）</th>
<th>日志实现</th>
</tr>
</thead>
<tbody><tr>
<td>SLF4j（Simple  Logging Facade for Java）  <strong><del>jboss-logging</del></strong>  <del>JCL（Jakarta  Commons Logging）</del></td>
<td>Log4j  JUL（java.util.logging）  Log4j2  <strong>Logback</strong></td>
</tr>
</tbody></table>
<hr />

<p>SLF4j 、 Log4j 、Logback 都是出自同一个人之手。现在我们从左边选一个门面（抽象层）、右边来选一个实现，最佳的搭配如下。【不使用Log4j ，是因为 Logback 比它更好，而且作者为同一人。不使用 JUL ，因为诞生就是和 Log4j 进行市场竞争的，所以没有后来的 Logback 好。不选择 Log4j2 的理由就是 它做的太好了，还不能和框架适配起来。就像计算机网络中的 OSI 七层协议和 OSI 五层协议 一样，七层太好了，还不能适配，五层并非官方，市场上却用的最多】</p>
<ul>
<li>日志门面：SLF4J</li>
<li>日志实现：Logback</li>
</ul>
<p>Spring Boot 的底层是 Spring 框架，Spring 框架默认是用 JCL（Jakarta  Commons Logging） 作为日志框架。而 Spring Boot 选用 SLF4j 和 logback 作为日志框架。</p>
<h2 id="SLF4j-的使用"><a href="#SLF4j-的使用" class="headerlink" title="SLF4j 的使用"></a>SLF4j 的使用</h2><p>那我们如何在系统中使用 SLF4j 呢？参考官网： <a href="https://www.slf4j.org">https://www.slf4j.org</a> 。如下图示：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/013.png"/>

<p>我们以后在开发的时候，日志记录方法的调用，不应该来直接调用日志的实现类，而是调用日志抽象层里面的方法。首先就要给系统里面导入 slf4j 的 jar 和  logback 的实现 jar 。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Logger logger = LoggerFactory.getLogger(HelloWorld<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    logger.info(<span class="string">"Hello World"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每一个日志的实现框架都有自己的配置文件，使用 slf4j 以后，配置文件还是做成日志实现框架自己本身的配置文件。如果你是用 logback 实现的，那就做成 logback 的配置文件。</p>
<h2 id="遗留问题"><a href="#遗留问题" class="headerlink" title="遗留问题"></a>遗留问题</h2><p>打个比方，开发 A 系统时使用的是 <font color=blue>slf4j + logback</font> 日志框架，又用到了Spring（commons-logging）、Hibernate（jboss-logging）、MyBatis 等等各种 JavaEE 框架，那么就会出现好多日志框架，导致冲突。那么我们就要统一日志记录，即要求别的框架统一使用 slf4j 进行输出。那么该如何做呢？该如何让系统中所有的日志都统一到 slf4j 呢？</p>
<ul>
<li><font color=blue>将系统中其他日志框架先排除出去</font></li>
<li><font color=blue>用中间包来替换原有的日志框架</font></li>
<li><font color=blue>我们导入slf4j其他的实现</font></li>
</ul>
<p>下图是官方的解决方案图：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/014.png"/>

<h2 id="Spring-Boot-日志关系"><a href="#Spring-Boot-日志关系" class="headerlink" title="Spring Boot 日志关系"></a>Spring Boot 日志关系</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>Spring Boot 使用它来做日志功能</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>Spring Boot 日志底层依赖关系，如下图：</p>
<img src="../gallery/Java-Study/Spring-Boot-01/015.png"/>

<p><font color=blue>Spring Boot 日志总结：</font></p>
<ul>
<li>Spring Boot 底层也是使用 slf4j + logback 的方式进行日志记录</li>
<li>Spring Boot 也把其他的日志都替换成了 slf4j</li>
<li>中间替换包，log4j 的底层仍然使用 Slf4j ，如下面代码所示，其他的中间替换包原理都一样。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"rawtypes"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">LogFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> String UNSUPPORTED_OPERATION_IN_JCL_OVER_SLF4J = <span class="string">"http://www.slf4j.org/codes.html#unsupported_operation_in_jcl_over_slf4j"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> LogFactory logFactory = <span class="keyword">new</span> SLF4JLogFactory();</span><br></pre></td></tr></table></figure></li>
<li>如果我们要引入其他框架，一定要把这个框架的默认日志依赖移除掉<br>SpringBoot能自动适配所有的日志，而且底层使用slf4j+logback的方式记录日志，引入其他框架的时候，只需要把这个框架依赖的日志框架排除掉即可。</li>
</ul>
<h2 id="日志使用"><a href="#日志使用" class="headerlink" title="日志使用"></a>日志使用</h2><p>Spring Boot 默认帮我们配置好了日志，只要我们运行程序，控制台便会有日志输出，测试程序如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> edu.jgsu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">SpringBootTest</span></span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">ApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建记录器</span></span><br><span class="line">    Logger logger = LoggerFactory.getLogger(getClass());</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 以下是日志的级别，优先级从低到高， trace &lt; debug &lt; info &lt; warn &lt; error</span></span><br><span class="line">        logger.trace(<span class="string">"这是trace日志..."</span>);</span><br><span class="line">        logger.debug(<span class="string">"这是debug日志..."</span>);</span><br><span class="line">        <span class="comment">// Spring Boot 默认给我们使用的是 info 级别的，info 级别以下的不输出，没有指定级别的就用 Spring Boot 默认规定的级别；root 级别(就是 info 级别)</span></span><br><span class="line">        logger.info(<span class="string">"这是info日志..."</span>);</span><br><span class="line">        logger.warn(<span class="string">"这是warn日志..."</span>);</span><br><span class="line">        logger.error(<span class="string">"这是error日志..."</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>控制台输出的结果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">27</span>:<span class="number">01.312</span>  INFO <span class="number">22432</span> --- [           main] edu.jgsu.ApplicationTests                : Started ApplicationTests in <span class="number">4.233</span> seconds (JVM running <span class="keyword">for</span> <span class="number">8.279</span>)</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">27</span>:<span class="number">01.488</span>  INFO <span class="number">22432</span> --- [           main] edu.jgsu.ApplicationTests                : 这是info日志...</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">27</span>:<span class="number">01.488</span>  WARN <span class="number">22432</span> --- [           main] edu.jgsu.ApplicationTests                : 这是warn日志...</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">27</span>:<span class="number">01.488</span> ERROR <span class="number">22432</span> --- [           main] edu.jgsu.ApplicationTests                : 这是error日志...</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">27</span>:<span class="number">01.501</span>  INFO <span class="number">22432</span> --- [       Thread-<span class="number">2</span>] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext<span class="meta">@aba</span>8be: startup date [Tue Feb <span class="number">04</span> <span class="number">22</span>:<span class="number">26</span>:<span class="number">57</span> CST <span class="number">2020</span>]; root of context hierarchy</span><br></pre></td></tr></table></figure>
<p>现在要改变日志级别，在配置文件中加入下列代码：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">logging.level.edu.jgsu</span>=<span class="string">trace</span></span><br></pre></td></tr></table></figure>
<p>然后控制台输出的结果就改变了，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">29</span>:<span class="number">48.232</span>  INFO <span class="number">2368</span> --- [           main] edu.jgsu.ApplicationTests                : Started ApplicationTests in <span class="number">3.614</span> seconds (JVM running <span class="keyword">for</span> <span class="number">5.138</span>)</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">29</span>:<span class="number">48.369</span> TRACE <span class="number">2368</span> --- [           main] edu.jgsu.ApplicationTests                : 这是trace日志...</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">29</span>:<span class="number">48.369</span> DEBUG <span class="number">2368</span> --- [           main] edu.jgsu.ApplicationTests                : 这是debug日志...</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">29</span>:<span class="number">48.370</span>  INFO <span class="number">2368</span> --- [           main] edu.jgsu.ApplicationTests                : 这是info日志...</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">29</span>:<span class="number">48.370</span>  WARN <span class="number">2368</span> --- [           main] edu.jgsu.ApplicationTests                : 这是warn日志...</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">29</span>:<span class="number">48.370</span> ERROR <span class="number">2368</span> --- [           main] edu.jgsu.ApplicationTests                : 这是error日志...</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> <span class="number">22</span>:<span class="number">29</span>:<span class="number">48.377</span>  INFO <span class="number">2368</span> --- [       Thread-<span class="number">2</span>] o.s.w.c.s.GenericWebApplicationContext   : Closing org.springframework.web.context.support.GenericWebApplicationContext<span class="meta">@d</span>9b808: startup date [Tue Feb <span class="number">04</span> <span class="number">22</span>:<span class="number">29</span>:<span class="number">45</span> CST <span class="number">2020</span>]; root of context hierarchy</span><br></pre></td></tr></table></figure>

<p>根据以下代码，可修改 Spring Boot 日志的默认配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改日志级别</span></span><br><span class="line"><span class="meta">logging.level.edu.jgsu</span>=<span class="string">trace</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定完整的路径来保存日志。以下指定了在 C 盘用springboot.log文件来记录日志</span></span><br><span class="line"><span class="meta">logging.file</span>=<span class="string">c:/springboot.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在当前磁盘的根路径下创建spring文件夹和里面的log文件夹，使用 spring.log 作为默认文件来记录日志</span></span><br><span class="line"><span class="comment"># logging.path=/spring/log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在控制台输出的日志的格式</span></span><br><span class="line"><span class="meta">logging.pattern.console</span>=<span class="string">%d&#123;yyyy-MM-dd&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定文件中日志输出的格式</span></span><br><span class="line"><span class="meta">logging.pattern.file</span>=<span class="string">%d&#123;yyyy-MM-dd&#125; === [%thread] === %-5level === %logger&#123;50&#125; ==== %msg%n</span></span><br></pre></td></tr></table></figure>
<p>在这里，我们区分一下 logging.file 和 logging.path  ：</p>
<hr />

<table>
<thead>
<tr>
<th>logging.file</th>
<th>logging.path</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>(none)</td>
<td>(none)</td>
<td></td>
<td>只在控制台输出</td>
</tr>
<tr>
<td>指定文件名</td>
<td>(none)</td>
<td>my.log</td>
<td>输出日志到my.log文件</td>
</tr>
<tr>
<td>(none)</td>
<td>指定目录</td>
<td>/var/log</td>
<td>输出到指定目录的 spring.log 文件中</td>
</tr>
</tbody></table>
<hr />

<p>配置好之后，执行测试类，然后就会在 D 盘生成 springboot.log 文件，里面的日志与格式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> === [main] === INFO  === edu.jgsu.ApplicationTests ==== Starting ApplicationTests on guoshizhan with PID <span class="number">1984</span> (started by guoshizhan in F:\<span class="number">99</span>-Frameworks\<span class="number">01</span>-springboot\<span class="number">003</span>-springboot-logging)</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> === [main] === DEBUG === edu.jgsu.ApplicationTests ==== Running with Spring Boot v2<span class="number">.0</span><span class="number">.1</span>.RELEASE, Spring v5<span class="number">.0</span><span class="number">.5</span>.RELEASE</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> === [main] === INFO  === edu.jgsu.ApplicationTests ==== No active profile set, falling back to <span class="keyword">default</span> profiles: <span class="keyword">default</span></span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> === [main] === INFO  === o.s.w.context.support.GenericWebApplicationContext ==== Refreshing org.springframework.web.context.support.GenericWebApplicationContext@<span class="number">2f</span>f096: startup date [Tue Feb <span class="number">04</span> <span class="number">22</span>:<span class="number">57</span>:<span class="number">02</span> CST <span class="number">2020</span>]; root of context hierarchy</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> === [main] === INFO  === o.s.web.servlet.handler.SimpleUrlHandlerMapping ==== Mapped URL path [<span class="comment">/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</span></span><br><span class="line"><span class="comment">2020-02-04 === [main] === INFO  === o.s.w.s.m.m.a.RequestMappingHandlerAdapter ==== Looking for <span class="doctag">@ControllerAdvice</span>: org.springframework.web.context.support.GenericWebApplicationContext@2ff096: startup date [Tue Feb 04 22:57:02 CST 2020]; root of context hierarchy</span></span><br><span class="line"><span class="comment">2020-02-04 === [main] === INFO  === o.s.w.s.m.m.a.RequestMappingHandlerMapping ==== Mapped "&#123;[/error]&#125;" onto public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.error(javax.servlet.http.HttpServletRequest)</span></span><br><span class="line"><span class="comment">2020-02-04 === [main] === INFO  === o.s.w.s.m.m.a.RequestMappingHandlerMapping ==== Mapped "&#123;[/error],produces=[text/html]&#125;" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)</span></span><br><span class="line"><span class="comment">2020-02-04 === [main] === INFO  === o.s.web.servlet.handler.SimpleUrlHandlerMapping ==== Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</span></span><br><span class="line"><span class="comment">2020-02-04 === [main] === INFO  === o.s.web.servlet.handler.SimpleUrlHandlerMapping ==== Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</span></span><br><span class="line"><span class="comment">2020-02-04 === [main] === INFO  === edu.jgsu.ApplicationTests ==== Started ApplicationTests in 3.936 seconds (JVM running for 5.688)</span></span><br><span class="line"><span class="comment">2020-02-04 === [main] === TRACE === edu.jgsu.ApplicationTests ==== 这是trace日志...</span></span><br><span class="line"><span class="comment">2020-02-04 === [main] === DEBUG === edu.jgsu.ApplicationTests ==== 这是debug日志...</span></span><br><span class="line"><span class="comment">2020-02-04 === [main] === INFO  === edu.jgsu.ApplicationTests ==== 这是info日志...</span></span><br><span class="line"><span class="comment">2020-02-04 === [main] === WARN  === edu.jgsu.ApplicationTests ==== 这是warn日志...</span></span><br><span class="line"><span class="comment">2020-02-04 === [main] === ERROR === edu.jgsu.ApplicationTests ==== 这是error日志...</span></span><br><span class="line"><span class="comment">2020-02-04 === [Thread-2] === INFO  === o.s.w.context.support.GenericWebApplicationContext ==== Closing org.springframework.web.context.support.GenericWebApplicationContext@2ff096: startup date [Tue Feb 04 22:57:02 CST 2020]; root of context hierarchy</span></span><br></pre></td></tr></table></figure>
<p>与 D 盘的 springboot.log 文件里的日志相比，控制台的日志与格式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> [main] INFO  edu.jgsu.ApplicationTests - Starting ApplicationTests on guoshizhan with PID <span class="number">1984</span> (started by guoshizhan in F:\<span class="number">99</span>-Frameworks\<span class="number">01</span>-springboot\<span class="number">003</span>-springboot-logging)</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> [main] DEBUG edu.jgsu.ApplicationTests - Running with Spring Boot v2<span class="number">.0</span><span class="number">.1</span>.RELEASE, Spring v5<span class="number">.0</span><span class="number">.5</span>.RELEASE</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> [main] INFO  edu.jgsu.ApplicationTests - No active profile set, falling back to <span class="keyword">default</span> profiles: <span class="keyword">default</span></span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> [main] INFO  o.s.w.context.support.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@<span class="number">2f</span>f096: startup date [Tue Feb <span class="number">04</span> <span class="number">22</span>:<span class="number">57</span>:<span class="number">02</span> CST <span class="number">2020</span>]; root of context hierarchy</span><br><span class="line"><span class="number">2020</span>-<span class="number">02</span>-<span class="number">04</span> [main] INFO  o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [<span class="comment">/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</span></span><br><span class="line"><span class="comment">2020-02-04 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerAdapter - Looking for <span class="doctag">@ControllerAdvice</span>: org.springframework.web.context.support.GenericWebApplicationContext@2ff096: startup date [Tue Feb 04 22:57:02 CST 2020]; root of context hierarchy</span></span><br><span class="line"><span class="comment">2020-02-04 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "&#123;[/error]&#125;" onto public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.error(javax.servlet.http.HttpServletRequest)</span></span><br><span class="line"><span class="comment">2020-02-04 [main] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "&#123;[/error],produces=[text/html]&#125;" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)</span></span><br><span class="line"><span class="comment">2020-02-04 [main] INFO  o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</span></span><br><span class="line"><span class="comment">2020-02-04 [main] INFO  o.s.web.servlet.handler.SimpleUrlHandlerMapping - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</span></span><br><span class="line"><span class="comment">2020-02-04 [main] INFO  edu.jgsu.ApplicationTests - Started ApplicationTests in 3.936 seconds (JVM running for 5.688)</span></span><br><span class="line"><span class="comment">2020-02-04 [main] TRACE edu.jgsu.ApplicationTests - 这是trace日志...</span></span><br><span class="line"><span class="comment">2020-02-04 [main] DEBUG edu.jgsu.ApplicationTests - 这是debug日志...</span></span><br><span class="line"><span class="comment">2020-02-04 [main] INFO  edu.jgsu.ApplicationTests - 这是info日志...</span></span><br><span class="line"><span class="comment">2020-02-04 [main] WARN  edu.jgsu.ApplicationTests - 这是warn日志...</span></span><br><span class="line"><span class="comment">2020-02-04 [main] ERROR edu.jgsu.ApplicationTests - 这是error日志...</span></span><br><span class="line"><span class="comment">2020-02-04 [Thread-2] INFO  o.s.w.context.support.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@2ff096: startup date [Tue Feb 04 22:57:02 CST 2020]; root of context hierarchy</span></span><br></pre></td></tr></table></figure>
<p>上面的两种日志格式就是 properties 配置文件中配置的格式。现在来说一下日志格式中那些字符的含义：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">日志输出格式：</span></span><br><span class="line">    <span class="string">%d</span> <span class="string">表示日期时间，</span></span><br><span class="line">    <span class="string">%thread</span> <span class="string">表示线程名，</span></span><br><span class="line">    <span class="string">%-5level</span> <span class="string">级别从左显示5个字符宽度</span></span><br><span class="line">    <span class="string">%logger&#123;50&#125;</span> <span class="string">表示logger名字最长50个字符，否则按照句点分割。</span></span><br><span class="line">    <span class="string">%msg</span> <span class="string">日志消息</span></span><br><span class="line">    <span class="string">%n</span> <span class="string">是换行符</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 举例如下：</span></span><br><span class="line"><span class="string">%d&#123;yyyy-MM-dd</span> <span class="string">HH:mm:ss.SSS&#125;</span> <span class="string">[%thread]</span> <span class="string">%-5level</span> <span class="string">%logger&#123;50&#125;</span> <span class="bullet">-</span> <span class="string">%msg%n</span></span><br></pre></td></tr></table></figure>
<h2 id="使用自定义日志配置文件"><a href="#使用自定义日志配置文件" class="headerlink" title="使用自定义日志配置文件"></a>使用自定义日志配置文件</h2><p>如何使用自定义的日志文件呢？给类路径下即 resources 下放上每个日志框架自己的配置文件即可，【这个日志配置文件要自己编写，在最后我会提供一份日志配置，仅供参考】Spring Boot 就不使用它自己的默认配置了。但是自定义的日志配置文件的名字必须在下面表格 Customization 中的其中一个。</p>
<hr />

<table>
<thead>
<tr>
<th>Logging System</th>
<th>Customization</th>
</tr>
</thead>
<tbody><tr>
<td>Logback</td>
<td><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code> or <code>logback.groovy</code></td>
</tr>
<tr>
<td>Log4j2</td>
<td><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td>
</tr>
<tr>
<td>JDK (Java Util Logging)</td>
<td><code>logging.properties</code></td>
</tr>
</tbody></table>
<hr />

<p>建议不要用 logback.xml 这个名字，因为 logback.xml 直接就被日志框架识别了，所以无法使用高级功能。建议使用 <strong>logback-spring.xml</strong> 这个名字，日志框架就不能直接加载日志的配置项，所以就由 Spring Boot 来解析日志配置，从而可以使用 Spring Boot 的高级 Profile 功能。</p>
<p>下面标签里面可以指定某段配置只在某个环境下生效：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"staging"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- configuration to be enabled when the "staging" profile is active --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>下面代码自定义了开发环境日志格式和非开发环境日志格式：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"stdout"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.PatternLayout"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 开发环境日志格式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"dev"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; ----&gt; [%thread] ---&gt; %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 非开发环境日志格式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"!dev"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; ==== [%thread] ==== %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果使用 logback.xml 作为日志配置文件，还要配置使用 Profile 功能，会出现以下错误：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no applicable action <span class="keyword">for</span> [springProfile]</span><br></pre></td></tr></table></figure>
<h2 id="切换日志框架"><a href="#切换日志框架" class="headerlink" title="切换日志框架"></a>切换日志框架</h2><hr />

<p>Spring Boot 默认使用的日志框架是 Slf4j + logback ，那么如果我要切换其他的日志框架，那该怎么做呢？可以按照 slf4j 的日志适配图【上一张图片】，进行相关的切换。例如：我们要把原先的 slf4j + logback 切换为 slf4j + log4j 的方式，那该这么做呢？首先，我们根据日志适配图排除不需要的日志依赖，然后新增我们需要的日志依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>切换为 log4j2</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>到这里，Spring Boot 的日志就结束了，这一章节我感觉后面日志切换有点难，也写的不好，还没有贴代码。后期有时间的话，我会以更好的表达来重新写过。那么，接下来就是 Spring Boot 的重点内容，Spring Boot 与 Web 开发。</p>
</blockquote>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item  guo-tags">
                    <i class="fas fa-tags has-text-grey"></i>&nbsp;&nbsp;
                    <a class="has-link-grey -link" href="/tags/Java/" rel="tag">Java</a>&nbsp;<i class=" has-text-grey">/</i>&nbsp;<a class="has-link-grey -link" href="/tags/Spring-Boot/" rel="tag">Spring Boot</a>
                </div>
            </div>
        </div>
        
        
        
        <!-- 文章版权信息代码开始 -->

        
            <ul class="post-copyright">
            <li><b>本文标题：</b><b>Spring Boot 教程详细版（上篇）</b></li>
            <li><b>本文作者：</b><b>Java Developer</b></li>
            <li><b>本文链接：</b><b><a href="https://guoshizhan.github.io/Spring-Boot-01.html">https://guoshizhan.github.io/Spring-Boot-01.html</a></b></li>
            <li><b>版权声明：</b><b>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</b>
            </li>
            </ul>
            <br/>
            <span class="is-size-6 has-text-grey has-mr-7">📚&nbsp;本站推荐文章</span>
<br>

    &nbsp;<!--1--> 👉 <a href="/blog-setup.html" class="is-size-6" target="_blank">从 0 开始搭建 Hexo 博客</a><br>

    &nbsp;<!--2--> 👉 <a href="/computerNetwork.html" class="is-size-6" target="_blank">计算机网络入门教程</a><br>

    &nbsp;<!--3--> 👉 <a href="/Structure.html" class="is-size-6" target="_blank">数据结构入门</a><br>

    &nbsp;<!--4--> 👉 <a href="/Algorithm.html" class="is-size-6" target="_blank">算法入门</a><br>

    &nbsp;<!--5--> 👉 <a href="/IDEA.html" class="is-size-6" target="_blank">IDEA 入门教程</a><br>

            <br>
        

        <!-- 文章版权信息代码结束-->
        

        
        <div class="social-share"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css">
<script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3>
        <div class="buttons is-centered">
            
                
<a class="button is-info donate">
    <span class="icon is-small">
        <i class="fab fa-alipay"></i>
    </span>
    <span>支付宝</span>
    <div class="qrcode"><img src="/images/wechat.png" alt="支付宝"></div>
</a>

                
                
<a class="button is-success donate">
    <span class="icon is-small">
        <i class="fab fa-weixin"></i>
    </span>
    <span>微信</span>
    <div class="qrcode"><img src="/images/wechat.png" alt="微信"></div>
</a>

                
        </div>
    </div>
</div>



<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/windows.html">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">windows教程</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/computerNetwork.html">
                <span class="level-item">计算机网络入门教程</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">可在评论区留言哦</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
        clientID: 'cff2590c3ebe89a56cf0',
        clientSecret: 'b6eea23c7fd06b8a540fea56bfa7546a3dfcf214',
        id: '80ecaf878fbb844c012201a17745f77b',
        repo: 'gitalk-comments',
        owner: 'guoshizhan',
        admin: "guoshizhan",
        createIssueManually: false,
        distractionFreeMode: true
    })
    gitalk.render('comment-container')
</script>

    </div>
</div>
</div>
                




<div class="column is-4-tablet is-3-desktop is-3-widescreen  has-order-1 column-left is-sticky">
    
        <!--         这里的第一行和最后一行的功能是动态隐藏 profile ，菜单页显示，文章页不显示。-->

<div class="card widget">
    <div class="card-content guo-profile">
        <nav class="level">
            <div class="level-item has-text-centered guo-nav" style="flex-shrink: 1">
                <div class="guo-header">
                    <div class="guo-img">
                        
                        <figure class="image is-128x128 has-mb-6">
                            <img class="is-rounded  avatar-image" src="/images/avatar.gif" alt="何年の再遇见">
                        </figure>
                    </div>
                    
                    <div class="guo-text">
                        
                            <p class="is-size-4 is-block">
                                何年の再遇见
                            </p>
                            
                            
                            <p class="is-size-6 is-block">
                                愿你走出半生，归来仍是少年
                            </p>
                            
                            
                            <p class="is-size-6 is-flex is-flex-center">
                                <i class="fas fa-map-marker-alt has-mr-7"></i>
                                <span>井冈山大学</span>
                            </p>
                        
                    </div>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile guo-nav">
            <div class="level-item has-text-centered is-marginless wz">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            29
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless fl">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            8
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless bq">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            38
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        <!--
        
            <div >
                <a class="level-item button guo-github" href="https://github.com/guoshizhan" target="_blank" rel="noopener">我的 GitHub 地址</a>
            </div>
        
        -->
        
        
        <div style="max-height:100px;">
            <p id="hitokoto">一言句子获取中...</p>
            <script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script>
        </div>
    </div>
</div>
<!--         这里的最后一行和第一行的功能是动态隐藏 profile ，菜单页显示，文章页不显示。-->
    
        

    <div class="card widget toc-scroll" id="toc">
        <div class="card-content">
            <div class="menu">
                <h3 class="menu-label">
                    目录
                </h3>
                <ul class="menu-list"><li>
        <a class="is-flex" href="#Spring-Boot-入门">
        <span class="has-mr-6">1</span>
        <span>Spring Boot 入门</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Spring-Boot-出现的背景">
        <span class="has-mr-6">1.1</span>
        <span>Spring Boot 出现的背景</span>
        </a></li><li>
        <a class="is-flex" href="#Spring-Boot简介">
        <span class="has-mr-6">1.2</span>
        <span>Spring Boot简介</span>
        </a></li><li>
        <a class="is-flex" href="#Spring-Boot-优缺点">
        <span class="has-mr-6">1.3</span>
        <span>Spring Boot 优缺点</span>
        </a></li><li>
        <a class="is-flex" href="#微服务简介">
        <span class="has-mr-6">1.4</span>
        <span>微服务简介</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#Spring-Boot-配置">
        <span class="has-mr-6">2</span>
        <span>Spring Boot 配置</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#环境准备">
        <span class="has-mr-6">2.1</span>
        <span>环境准备</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#Maven-配置">
        <span class="has-mr-6">2.1.1</span>
        <span>Maven 配置</span>
        </a></li><li>
        <a class="is-flex" href="#IDEA-配置">
        <span class="has-mr-6">2.1.2</span>
        <span>IDEA 配置</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#创建一个简单的-Web-应用">
        <span class="has-mr-6">2.2</span>
        <span>创建一个简单的 Web 应用</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#创建-Maven-项目">
        <span class="has-mr-6">2.2.1</span>
        <span>创建 Maven 项目</span>
        </a></li><li>
        <a class="is-flex" href="#导入相关的依赖">
        <span class="has-mr-6">2.2.2</span>
        <span>导入相关的依赖</span>
        </a></li><li>
        <a class="is-flex" href="#创建主程序">
        <span class="has-mr-6">2.2.3</span>
        <span>创建主程序</span>
        </a></li><li>
        <a class="is-flex" href="#编写-Controller">
        <span class="has-mr-6">2.2.4</span>
        <span>编写 Controller</span>
        </a></li><li>
        <a class="is-flex" href="#启动运行">
        <span class="has-mr-6">2.2.5</span>
        <span>启动运行</span>
        </a></li><li>
        <a class="is-flex" href="#打包部署">
        <span class="has-mr-6">2.2.6</span>
        <span>打包部署</span>
        </a></li><li>
        <a class="is-flex" href="#拓展：自定义-banner">
        <span class="has-mr-6">2.2.7</span>
        <span>拓展：自定义 banner</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#hello-world-应用剖析">
        <span class="has-mr-6">2.3</span>
        <span>hello world 应用剖析</span>
        </a></li><li>
        <a class="is-flex" href="#自动配置原理">
        <span class="has-mr-6">2.4</span>
        <span>自动配置原理</span>
        </a></li><li>
        <a class="is-flex" href="#快速创建-Spring-Boot-应用">
        <span class="has-mr-6">2.5</span>
        <span>快速创建 Spring Boot 应用</span>
        </a></li><li>
        <a class="is-flex" href="#Spring-Boot-的配置文件">
        <span class="has-mr-6">2.6</span>
        <span>Spring Boot 的配置文件</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#YAML-配置文件">
        <span class="has-mr-6">2.6.1</span>
        <span>YAML 配置文件</span>
        </a></li><li>
        <a class="is-flex" href="#标记语言对比">
        <span class="has-mr-6">2.6.2</span>
        <span>标记语言对比</span>
        </a></li><li>
        <a class="is-flex" href="#YAML-基本语法">
        <span class="has-mr-6">2.6.3</span>
        <span>YAML 基本语法</span>
        </a></li><li>
        <a class="is-flex" href="#YAML-值的写法">
        <span class="has-mr-6">2.6.4</span>
        <span>YAML 值的写法</span>
        </a></li><li>
        <a class="is-flex" href="#配置文件值的注入">
        <span class="has-mr-6">2.6.5</span>
        <span>配置文件值的注入</span>
        </a></li><li>
        <a class="is-flex" href="#配置文件占位符">
        <span class="has-mr-6">2.6.6</span>
        <span>配置文件占位符</span>
        </a></li><li>
        <a class="is-flex" href="#Profile">
        <span class="has-mr-6">2.6.7</span>
        <span>Profile</span>
        </a></li><li>
        <a class="is-flex" href="#配置文件加载位置">
        <span class="has-mr-6">2.6.8</span>
        <span>配置文件加载位置</span>
        </a></li><li>
        <a class="is-flex" href="#外部配置加载顺序">
        <span class="has-mr-6">2.6.9</span>
        <span>外部配置加载顺序</span>
        </a></li><li>
        <a class="is-flex" href="#自动配置原理-1">
        <span class="has-mr-6">2.6.10</span>
        <span>自动配置原理</span>
        </a></li></ul></li></ul></li><li>
        <a class="is-flex" href="#Spring-Boot-日志">
        <span class="has-mr-6">3</span>
        <span>Spring Boot 日志</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#市面上的日志框架">
        <span class="has-mr-6">3.1</span>
        <span>市面上的日志框架</span>
        </a></li><li>
        <a class="is-flex" href="#SLF4j-的使用">
        <span class="has-mr-6">3.2</span>
        <span>SLF4j 的使用</span>
        </a></li><li>
        <a class="is-flex" href="#遗留问题">
        <span class="has-mr-6">3.3</span>
        <span>遗留问题</span>
        </a></li><li>
        <a class="is-flex" href="#Spring-Boot-日志关系">
        <span class="has-mr-6">3.4</span>
        <span>Spring Boot 日志关系</span>
        </a></li><li>
        <a class="is-flex" href="#日志使用">
        <span class="has-mr-6">3.5</span>
        <span>日志使用</span>
        </a></li><li>
        <a class="is-flex" href="#使用自定义日志配置文件">
        <span class="has-mr-6">3.6</span>
        <span>使用自定义日志配置文件</span>
        </a></li><li>
        <a class="is-flex" href="#切换日志框架">
        <span class="has-mr-6">3.7</span>
        <span>切换日志框架</span>
        </a></li></ul></li></ul>
            </div>
        </div>
    </div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/C-python-Linux/">
            <span class="level-start">
                <span class="level-item">C-python-Linux</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Java%E5%AD%A6%E4%B9%A0/">
            <span class="level-start">
                <span class="level-item">Java学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">12</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86/">
            <span class="level-start">
                <span class="level-item">前端知识</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/%E5%A4%A7%E5%AD%A6-%E7%94%9F%E6%B4%BB-%E5%85%B6%E4%BB%96/">
            <span class="level-start">
                <span class="level-item">大学-生活-其他</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/%E6%95%99%E7%A8%8B%E5%B7%A5%E5%85%B7/">
            <span class="level-start">
                <span class="level-item">教程工具</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">
            <span class="level-start">
                <span class="level-item">数据库</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/">
            <span class="level-start">
                <span class="level-item">数据结构和算法</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">
            <span class="level-start">
                <span class="level-item">计算机网络</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
    
        <div class="column-right-shadow  is-sticky">
        
            <div class="card widget">
	<div class="card-content">
		<h3 class="menu-label">我的歌单</h3>
		<div class="aplayer" data-id="1997628239" data-server="netease" data-type="playlist" data-mode="single"></div>
	</div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/AJAX/" style="font-size: 10px;">AJAX</a> <a href="/tags/CMD%E5%91%BD%E4%BB%A4/" style="font-size: 10px;">CMD命令</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/IDEA%E6%95%99%E7%A8%8B/" style="font-size: 10px;">IDEA教程</a> <a href="/tags/IO-%E6%B5%81/" style="font-size: 10px;">IO 流</a> <a href="/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Java%E5%9F%BA%E7%A1%80/" style="font-size: 16.67px;">Java基础</a> <a href="/tags/Java%E9%9B%86%E5%90%88/" style="font-size: 10px;">Java集合</a> <a href="/tags/Jenkins/" style="font-size: 10px;">Jenkins</a> <a href="/tags/Layui-%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">Layui 博客</a> <a href="/tags/LeetCode/" style="font-size: 10px;">LeetCode</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">Oracle数据库</a> <a href="/tags/PL-SQL/" style="font-size: 10px;">PL/SQL</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SSM/" style="font-size: 10px;">SSM</a> <a href="/tags/Spring-Boot/" style="font-size: 13.33px;">Spring Boot</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/hello-world/" style="font-size: 10px;">hello world</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/icarus%E4%B8%BB%E9%A2%98/" style="font-size: 10px;">icarus主题</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/windows%E6%95%99%E7%A8%8B/" style="font-size: 10px;">windows教程</a> <a href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" style="font-size: 10px;">函数式编程</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 10px;">前端</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" style="font-size: 10px;">博客搭建</a> <a href="/tags/%E5%8F%8D%E5%B0%84%E6%B3%A8%E8%A7%A3/" style="font-size: 10px;">反射注解</a> <a href="/tags/%E5%B8%B8%E7%94%A8-API/" style="font-size: 10px;">常用 API</a> <a href="/tags/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/" style="font-size: 10px;">常用算法</a> <a href="/tags/%E6%95%85%E4%BA%8B/" style="font-size: 10px;">故事</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">数据库</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 10px;">数据结构</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 10px;">算法</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" style="font-size: 10px;">网络编程</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 10px;">计算机网络</a>
    </div>
</div>
        
            <div class="card widget">
  <div class="card-content">
    <div class="menu">
      <h3 class="menu-label">
        订阅更新
      </h3>
      <div>
        <form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow"
          onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=guoshizhanFeedsId', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
          <input type="hidden" value="guoshizhanFeedsId" name="uri" />
          <input type="hidden" name="loc" value="en_US" />
          <div class="field">
            <div class="control has-icons-left">
              <input class="input" name="email" type="email" placeholder="请输入邮箱地址" />
              <span class="icon is-small is-left">
                <i class="fas fa-envelope"></i>
              </span>
            </div>
            <p class="help">立即订阅跳转人机认证后，点击完成按钮！</p>
          </div>
          <div class="field is-grouped is-grouped-right">
            <div class="control">
              <input class="button is-link is-rounded" type="submit" value="订阅">
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

        
        </div>
    
</div>

                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/GSZ's-Blog.png" alt="Spring Boot 教程详细版（上篇）" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 Java Developer&nbsp;
                Powered &#10084; ShiZhan·Guo
                </p>
            </div>    
            <script>
                (function(){
                    var bp = document.createElement('script');
                    var curProtocol = window.location.protocol.split(':')[0];
                    if (curProtocol === 'https') {
                        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                    }
                    else {
                        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                    }
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(bp, s);
                })();
            </script>

            <div align="center" id="access-number">
                <br>
                <script type="text/javascript" src="/js/statistics.js"></script>
                <span id="statistic-times"></span>
                <br>
                <div align="center">
                    <span class="busuanzi_container_site_pv">总访问量 
                        <b><span id="busuanzi_value_site_pv"></span></b> 次
                    </span>
                    <span class="busuanzi_container_site_uv">您是第  
                        <b><span id="busuanzi_value_site_uv"></b>
                        </span> 位小伙伴
                    </span>
                    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
                </div>
            </div>
            
            
            <!--<div id="earth">
                <span>
                <script type="text/javascript" src="//rf.revolvermaps.com/0/0/2.js?i=0xetp0d4rdh&m=7&s=130&c=00fff6&t=1" async="async"></script>
                </span>
            </div>-->


            <!--这个一个空的 div ，目的是让卜算子统计居中-->
            <div id="empty"></div>


            <script>
                (function(){
                    var bp = document.createElement('script');
                    bp.src = '//push.zhanzhang.baidu.com/push.js';
                    var s = document.getElementsByTagName("script")[0];
                    s.parentNode.insertBefore(bp, s);
                })();
            </script>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'https://guoshizhan.github.io',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>





<script src="/js/animation.js"></script>



<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>



<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>


<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>














<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
    
    <!--配置看板娘-->
    <script type="text/javascript" async="" src="/live2d/autoload.js"></script>

    <!--音乐js文件-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
    <script src="/js/APlayer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>
</body>
</html>